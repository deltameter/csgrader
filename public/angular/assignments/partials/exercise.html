<div class="exercise panel" ng-class="exerciseCtrl.getPanelClass('panel')">

	<div class="panel-heading">
		<div class="row">
			<div class="col-xs-8">
				<h3 class="panel-title">
					Exercise {{ exerciseCtrl.exercise.exerciseIndex + 1 }}: {{ exerciseCtrl.exercise.title }}
				</h3>
			</div>
			<div class="col-xs-4">
				<button class="btn btn-sm" ng-class="exerciseCtrl.getPanelClass('button')" ng-show="assignmentCtrl.user.role === 'teacher'" ng-click="exerciseCtrl.toggleEdit()">Edit</button>
			</div>
		</div>
	</div>

	<div class="panel-body">
		<div class="row">
			<div ng-bind-html="exerciseCtrl.exercise.context | trustAsHTML"></div>
		</div>

		<pre ng-show="exerciseCtrl.compilationInfo.output.length > 0">Output: {{ exerciseCtrl.compilationInfo.output }}</pre>
		<pre ng-show="exerciseCtrl.compilationInfo.errors.length > 0">Errors: {{ exerciseCtrl.compilationInfo.errors }}</pre>

		<div class="row small-spacer-top">
			<div class="col-xs-10 col-xs-offset-1">
				<div class="col-md-9 col-xs-12">
					<div class="exercise-button-container" ng-repeat="codeFile in exerciseCtrl.exercise[exerciseCtrl.focusFileType] track by $index">

						<btn class="btn btn-file" ng-class="exerciseCtrl.focusedFileIndex === $index ? 'btn-primary' : 'btn-default'" ng-click="exerciseCtrl.focusFile($index)">{{ codeFile.name + exerciseCtrl.exercise.language.fileExt }}</btn>

						<btn class="btn btn-sm" double-click="exerciseCtrl.deleteFile($index)" double-click-class="btn-warning btn-danger "ng-show="exerciseCtrl.focusedFileIndex === $index" >X</btn>

					</div>
				</div>

				<div class="col-md-3 col-xs-6 col-md-offset-0 col-xs-offset-6">
					<div class="col-xs-9">
						<input type="text" ng-model="exerciseCtrl.newFileName" placeholder="New File Name" class="form-control" autocomplete="off">
					</div>
					<btn class="btn btn-success" ng-click="exerciseCtrl.addFile()">+</btn>
				</div>

			</div>
		</div>

		<div ui-ace="exerciseCtrl.aceOptions" ng-model="exerciseCtrl.exercise[exerciseCtrl.focusFileType][exerciseCtrl.focusedFileIndex].code"></div>

		<div class="row small-spacer-bottom">
			<div ng-show="assignmentCtrl.user.role === 'teacher'">
				<div class="col-md-4 col-md-offset-4 col-xs-6 col-xs-offset-3">
					<btn class="btn btn-success btn-block" ng-click="exerciseCtrl.testExercise()">Test & Save Solution</btn>
				</div>
			</div>

			<div class="col-md-4 col-md-offset-4 col-xs-6 col-xs-offset-3" ng-show="assignmentCtrl.user.role !== 'teacher'">
				<btn class="btn btn-success btn-block" ng-click="exerciseCtrl.submitExercise()">Submit</btn>
			</div>
		</div>
	</div>
</div>