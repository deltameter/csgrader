!function(){angular.module("general",[])}(),function(){angular.module("user",[]).run(["$http","Session",function($http,Session){$http.get("/profile").success(function(res){Session.create(res)}).error(function(res){console.log("hello"),Session.setCurrentUser({user:"hello"})})}])}(),function(){var app=angular.module("grader",["ui.router","general","user"]);app.config(["$locationProvider",function($locationProvider){$locationProvider.html5Mode(!0)}])}(),function(){angular.module("general").controller("NavController",["$http","AuthService",function($http,AuthService){this.bLoggedIn=AuthService.isAuthenticated()}])}(),function(){angular.module("general").config(["$stateProvider",function($stateProvider){$stateProvider.state("index",{url:"/",resolve:{auth:["AuthResolver",function(AuthResolver){return console.log("hi"),AuthResolver.resolve()}]},controller:["$state","AuthService",function($state,AuthService){AuthService.isAuthenticated()?(console.log("ath"),$state.go("dashboard")):(console.log("nit auth"),$state.go("public"))}]}),$stateProvider.state("public",{url:"/",templateUrl:"/angular/general/index.general.html"})}])}(),function(){angular.module("user").controller("LoginController",["$state","$rootScope","AuthService",function($state,$rootScope,AuthService){var root=this;this.authMessage="",this.user={username:"",password:""},this.login=function(){AuthService.login(root.user).then(function(res){$state.go("profile")},function(res){root.authMessage=res.data.userMessage})}}]),angular.module("user").controller("DashboardController",["$state","Session",function($state,Session){console.log(Session.user),this.user=Session.user}]),angular.module("user").controller("ProfileController",["$state","Session",function($state,Session){this.user=Session.user}])}(),function(){angular.module("user").config(["$stateProvider",function($stateProvider){$stateProvider.state("login",{url:"/login",templateUrl:"/angular/user/auth.user.html",controller:"LoginController",controllerAs:"loginCtrl"}),$stateProvider.state("dashboard",{url:"",templateUrl:"/angular/user/dashboard.html",controller:"DashboardController",controllerAs:"dashboardCtrl"}),$stateProvider.state("profile",{url:"/profile",templateUrl:"/angular/user/profile.user.html",controller:"ProfileController",controllerAs:"profileCtrl"})}])}(),function(){angular.module("user").factory("AuthService",["$http","Session",function($http,Session){var authService={};return authService.login=function(credentials){return $http.post("/auth/local",credentials).then(function(res){return Session.create(res.data),res.data})},authService.isAuthenticated=function(){return Session.live()},authService}]),angular.module("user").service("Session",["$rootScope",function($rootScope){var root=this;this.user={},this.live=function(){return Object.keys(root.user).length>0},this.setCurrentUser=function(user){$rootScope.currentUser=user},this.create=function(user){$rootScope.currentUser=user,root.user=user},this.destroy=function(){$rootScope.currentUser=null,root.user=null}}]),angular.module("user").factory("AuthResolver",["$q","$rootScope","$state",function($q,$rootScope,$state){return{resolve:function(){console.log("asdf");var deferred=$q.defer(),unwatch=$rootScope.$watch("currentUser",function(currentUser){console.log("whwat"),angular.isDefined(currentUser)&&(console.log("hmm"),currentUser?deferred.resolve(currentUser):(deferred.reject(),$state.go("login")),unwatch())});return deferred.promise}}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyYWwvZ2VuZXJhbC5tb2R1bGUuanMiLCJ1c2VyL3VzZXIubW9kdWxlLmpzIiwiY29yZS5qcyIsImdlbmVyYWwvZ2VuZXJhbC5jdHJsLmpzIiwiZ2VuZXJhbC9nZW5lcmFsLnJvdXRlcy5qcyIsInVzZXIvdXNlci5jdHJsLmpzIiwidXNlci91c2VyLnJvdXRlcy5qcyIsInVzZXIvdXNlci5zdmMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsInJ1biIsIiRodHRwIiwiU2Vzc2lvbiIsImdldCIsInN1Y2Nlc3MiLCJyZXMiLCJjcmVhdGUiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzZXRDdXJyZW50VXNlciIsInVzZXIiLCJhcHAiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsImh0bWw1TW9kZSIsImNvbnRyb2xsZXIiLCJBdXRoU2VydmljZSIsInRoaXMiLCJiTG9nZ2VkSW4iLCJpc0F1dGhlbnRpY2F0ZWQiLCIkc3RhdGVQcm92aWRlciIsInN0YXRlIiwidXJsIiwicmVzb2x2ZSIsImF1dGgiLCJBdXRoUmVzb2x2ZXIiLCIkc3RhdGUiLCJnbyIsInRlbXBsYXRlVXJsIiwiJHJvb3RTY29wZSIsInJvb3QiLCJhdXRoTWVzc2FnZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJsb2dpbiIsInRoZW4iLCJkYXRhIiwidXNlck1lc3NhZ2UiLCJjb250cm9sbGVyQXMiLCJmYWN0b3J5IiwiYXV0aFNlcnZpY2UiLCJjcmVkZW50aWFscyIsInBvc3QiLCJsaXZlIiwic2VydmljZSIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJjdXJyZW50VXNlciIsImRlc3Ryb3kiLCIkcSIsImRlZmVycmVkIiwiZGVmZXIiLCJ1bndhdGNoIiwiJHdhdGNoIiwiaXNEZWZpbmVkIiwicmVqZWN0IiwicHJvbWlzZSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQUEsUUFBQUMsT0FBQSxpQkNEQSxXQUNBRCxRQUFBQyxPQUFBLFdBQ0FDLEtBQUEsUUFBQSxV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QUVBTyxLQUFBZ0MsUUFBQSxXQUNBcEIsV0FBQW1CLFlBQUEsS0FDQWxCLEtBQUFwQixLQUFBLFNBSUFiLFFBQUFDLE9BQUEsUUFBQXlDLFFBQUEsZ0JBQUEsS0FBQSxhQUFBLFNBQUEsU0FBQVcsR0FBQXJCLFdBQUFILFFBQ0EsT0FDQUgsUUFBQSxXQUNBaEIsUUFBQUMsSUFBQSxPQUNBLElBQUEyQyxVQUFBRCxHQUFBRSxRQUNBQyxRQUFBeEIsV0FBQXlCLE9BQUEsY0FBQSxTQUFBTixhQUNBekMsUUFBQUMsSUFBQSxTQUNBWCxRQUFBMEQsVUFBQVAsZUFDQXpDLFFBQUFDLElBQUEsT0FDQXdDLFlBQ0FHLFNBQUE1QixRQUFBeUIsY0FFQUcsU0FBQUssU0FDQTlCLE9BQUFDLEdBQUEsVUFFQTBCLFlBR0EsT0FBQUYsVUFBQU0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe1xyXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZ2VuZXJhbCcsIFtdKTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHR2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3VzZXInLCBbXSlcclxuXHQucnVuKGZ1bmN0aW9uKCRodHRwLCBTZXNzaW9uKXtcclxuXHRcdCRodHRwLmdldCgnL3Byb2ZpbGUnKVxyXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0U2Vzc2lvbi5jcmVhdGUocmVzKTtcclxuXHRcdH0pXHJcblx0XHQuZXJyb3IoZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0Y29uc29sZS5sb2coJ2hlbGxvJyk7XHJcblx0XHRcdFNlc3Npb24uc2V0Q3VycmVudFVzZXIoe3VzZXI6J2hlbGxvJ30pO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcblx0dmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdncmFkZXInLCBcclxuXHRcdFtcclxuXHRcdFx0J3VpLnJvdXRlcicsXHJcblx0XHRcdCdnZW5lcmFsJyxcclxuXHRcdFx0J3VzZXInXHJcblx0XHRdKTtcclxuXHJcblx0Ly9yZW1vdmUgdGhlIGhhc2hcclxuXHRhcHAuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlcil7XHJcblx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcblx0fV0pO1xyXG5cdFxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdnZW5lcmFsJykuY29udHJvbGxlcignTmF2Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRodHRwLCBBdXRoU2VydmljZSl7XHJcblx0XHR2YXIgcm9vdCA9IHRoaXM7XHJcblx0XHR0aGlzLmJMb2dnZWRJbiA9IEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpO1xyXG5cdH0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdnZW5lcmFsJykuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlcil7XHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnaW5kZXgnLCB7XHJcblx0XHRcdHVybDogJy8nLFxyXG5cdFx0XHRyZXNvbHZlOiB7XHJcblx0XHRcdFx0YXV0aDogZnVuY3Rpb24gcmVzb2x2ZUF1dGhlbnRpY2F0aW9uKEF1dGhSZXNvbHZlcikgeyBcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdoaScpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIEF1dGhSZXNvbHZlci5yZXNvbHZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkc3RhdGUsIEF1dGhTZXJ2aWNlKXtcclxuXHRcdFx0XHRpZiAoQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpe1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2F0aCcpXHJcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ2Rhc2hib2FyZCcpO1xyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ25pdCBhdXRoJylcclxuXHRcdFx0XHRcdCRzdGF0ZS5nbygncHVibGljJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgncHVibGljJywge1xyXG5cdFx0XHR1cmw6ICcvJyxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICcvYW5ndWxhci9nZW5lcmFsL2luZGV4LmdlbmVyYWwuaHRtbCdcclxuXHRcdH0pO1xyXG5cdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHJcblx0YW5ndWxhci5tb2R1bGUoJ3VzZXInKS5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBmdW5jdGlvbigkc3RhdGUsICRyb290U2NvcGUsIEF1dGhTZXJ2aWNlKXtcclxuXHRcdHZhciByb290ID0gdGhpcztcclxuXHRcdHRoaXMuYXV0aE1lc3NhZ2UgPSAnJztcclxuXHRcdHRoaXMudXNlciA9IHtcclxuXHRcdFx0dXNlcm5hbWU6ICcnLFxyXG5cdFx0XHRwYXNzd29yZDogJydcclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5sb2dpbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRBdXRoU2VydmljZS5sb2dpbihyb290LnVzZXIpLnRoZW4oXHJcblx0XHRcdFx0ZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0XHRcdCRzdGF0ZS5nbygncHJvZmlsZScpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0XHRcdHJvb3QuYXV0aE1lc3NhZ2UgPSByZXMuZGF0YS51c2VyTWVzc2FnZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH07XHJcblx0fSk7XHJcblx0XHJcblx0YW5ndWxhci5tb2R1bGUoJ3VzZXInKS5jb250cm9sbGVyKCdEYXNoYm9hcmRDb250cm9sbGVyJywgZnVuY3Rpb24oJHN0YXRlLCBTZXNzaW9uKXtcclxuXHRcdGNvbnNvbGUubG9nKFNlc3Npb24udXNlcik7XHJcblx0XHR0aGlzLnVzZXIgPSBTZXNzaW9uLnVzZXI7XHJcblx0fSk7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCd1c2VyJykuY29udHJvbGxlcignUHJvZmlsZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc3RhdGUsIFNlc3Npb24pe1xyXG5cdFx0dGhpcy51c2VyID0gU2Vzc2lvbi51c2VyO1xyXG5cdH0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCd1c2VyJykuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlcil7XHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4nLCB7XHJcblx0XHRcdHVybDogJy9sb2dpbicsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvdXNlci9hdXRoLnVzZXIuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdMb2dpbkNvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICdsb2dpbkN0cmwnXHJcblx0XHR9KTtcclxuXHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnZGFzaGJvYXJkJywge1xyXG5cdFx0XHR1cmw6ICcnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL3VzZXIvZGFzaGJvYXJkLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnRGFzaGJvYXJkQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ2Rhc2hib2FyZEN0cmwnXHJcblx0XHR9KTtcclxuXHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgncHJvZmlsZScsIHtcclxuXHRcdFx0dXJsOiAnL3Byb2ZpbGUnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL3VzZXIvcHJvZmlsZS51c2VyLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnUHJvZmlsZUNvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICdwcm9maWxlQ3RybCdcclxuXHRcdH0pO1xyXG5cdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmZhY3RvcnkoJ0F1dGhTZXJ2aWNlJywgZnVuY3Rpb24gKCRodHRwLCBTZXNzaW9uKSB7XHJcblx0XHR2YXIgYXV0aFNlcnZpY2UgPSB7fTtcclxuXHJcblx0XHRhdXRoU2VydmljZS5sb2dpbiA9IGZ1bmN0aW9uIChjcmVkZW50aWFscykge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHBcclxuXHRcdFx0LnBvc3QoJy9hdXRoL2xvY2FsJywgY3JlZGVudGlhbHMpXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuXHRcdFx0XHRTZXNzaW9uLmNyZWF0ZShyZXMuZGF0YSk7XHJcblx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0YXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRyZXR1cm4gU2Vzc2lvbi5saXZlKCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBhdXRoU2VydmljZTtcclxuXHR9KTtcclxuXHJcblx0YW5ndWxhci5tb2R1bGUoJ3VzZXInKS5zZXJ2aWNlKCdTZXNzaW9uJywgZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuXHRcdHZhciByb290ID0gdGhpcztcclxuXHRcdHRoaXMudXNlciA9IHt9O1xyXG5cclxuXHRcdHRoaXMubGl2ZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHJldHVybiAoT2JqZWN0LmtleXMocm9vdC51c2VyKS5sZW5ndGggPiAwKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNldEN1cnJlbnRVc2VyID0gZnVuY3Rpb24odXNlcil7XHJcblx0XHRcdCRyb290U2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuY3JlYXRlID0gZnVuY3Rpb24odXNlcil7XHJcblx0XHRcdCRyb290U2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xyXG5cdFx0XHRyb290LnVzZXIgPSB1c2VyO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JHJvb3RTY29wZS5jdXJyZW50VXNlciA9IG51bGw7XHJcblx0XHRcdHJvb3QudXNlciA9IG51bGw7XHJcblx0XHR9O1xyXG5cdH0pO1xyXG5cclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmZhY3RvcnkoJ0F1dGhSZXNvbHZlcicsIGZ1bmN0aW9uKCRxLCAkcm9vdFNjb3BlLCAkc3RhdGUpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlc29sdmU6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnYXNkZicpXHJcblx0XHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHRcdFx0XHR2YXIgdW53YXRjaCA9ICRyb290U2NvcGUuJHdhdGNoKCdjdXJyZW50VXNlcicsIGZ1bmN0aW9uIChjdXJyZW50VXNlcikge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3dod2F0Jyk7XHJcblx0XHRcdFx0XHRpZiAoYW5ndWxhci5pc0RlZmluZWQoY3VycmVudFVzZXIpKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdobW0nKTtcclxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRVc2VyKSB7XHJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShjdXJyZW50VXNlcik7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCk7XHJcblx0XHRcdFx0XHRcdFx0JHN0YXRlLmdvKCdsb2dpbicpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHVud2F0Y2goKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KTtcclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
