!function(){angular.module("assignments",[])}(),function(){angular.module("courses",[])}(),function(){angular.module("general",[]).config(["$provide",function($provide){$provide.decorator("taOptions",["$delegate",function(taOptions){return taOptions.toolbar=[["h1","h2","h3","p"],["bold","italics","underline"],["ul","ol"],["justifyLeft","justifyCenter","justifyRight"],["insertImage","insertLink","insertVideo"],["html"]],taOptions}])}])}(),function(){angular.module("misc",[])}(),function(){angular.module("user",[]).run(["$http","AuthService",function($http,AuthService){AuthService.retrieveProfile()}])}(),function(){var app=angular.module("grader",["ui.router","textAngular","general","courses","user","assignments","misc"]);app.config(["$locationProvider",function($locationProvider){$locationProvider.html5Mode(!0)}]),app.run(["$rootScope","$state","AuthService","AuthResolver",function($rootScope,$state,AuthService,AuthResolver){$rootScope.$on("$stateChangeStart",function(event,next){var ensureAuth=function(event,bIsLoggedIn){bIsLoggedIn||"undefined"!=typeof next.data&&next.data.bIsPublic===!0||(event.preventDefault(),$state.go("root.login"))};AuthResolver.bIsResolved()?(console.log("stateChangeStart resolved"),console.log("auth: "+AuthService.isAuthenticated()),ensureAuth(event,AuthService.isAuthenticated())):AuthResolver.resolve().then(function(data){console.log("stateChangeStart not resolved"),console.log("auth: "+AuthService.isAuthenticated()),ensureAuth(event,AuthService.isAuthenticated())})})}])}(),function(){angular.module("assignments").controller("AssignmentController",["$scope","$stateParams","UserInfo","AssignmentFactory","QuestionFactory","ExerciseFactory",function($scope,$stateParams,UserInfo,AssignmentFactory,QuestionFactory,ExerciseFactory){var vm=this;vm.user=UserInfo.getUser(),vm.courseCode=$stateParams.courseCode,vm.assignmentID=$stateParams.assignmentID,vm.assignment={};var getAssignment=function(){AssignmentFactory.getAssignment(vm.courseCode,vm.assignmentID).then(function(assignment){vm.assignment=assignment},function(err){})};this.addQuestion=function(){QuestionFactory.addQuestion(vm.courseCode,vm.assignmentID).then(function(newQuestion){newQuestion.questionIndex=vm.assignment.questions.length,vm.assignment.content.push(newQuestion),vm.assignment.questions.push(newQuestion)})},this.deleteQuestion=function(contentIndex,questionIndex){QuestionFactory.deleteQuestion(vm.courseCode,vm.assignmentID,questionIndex).then(function(){vm.assignment.content.splice(contentIndex,1),vm.assignment.questions.splice(questionIndex,1),$scope.$broadcast("QUESTION_DELETE",questionIndex)})},this.addExercise=function(){ExerciseFactory.addExercise(vm.courseCode,vm.assignmentID).then(function(newExercise){newExercise.exerciseIndex=vm.assignment.exercises.length,vm.assignment.content.push(newExercise),vm.assignment.exercises.push(newExercise)})},this.deleteExercise=function(contentIndex,exerciseIndex){ExerciseFactory.deleteExercise(vm.courseCode,vm.assignmentID,exerciseIndex).then(function(){vm.assignment.content.splice(contentIndex,1),vm.assignment.exercises.splice(exerciseIndex,1),$scope.$broadcast("EXERCISE_DELETE",exerciseIndex)})},getAssignment()}]).controller("QuestionController",["$scope","UserInfo",function($scope,UserInfo){var vm=this;vm.question=$scope.$parent.content,this.logQuestion=function(){console.log(vm.question)}}]).controller("QuestionEditController",["$scope","$stateParams","UserInfo","QuestionFactory",function($scope,$stateParams,UserInfo,QuestionFactory){var vm=this;vm.courseCode=$stateParams.courseCode,vm.assignmentID=$stateParams.assignmentID,vm.question=$scope.$parent.content,$scope.$on("QUESTION_DELETE",function(event,questionIndex){vm.question.questionIndex>questionIndex&&vm.question.questionIndex--}),this.editQuestion=function(){$scope.editForm.$dirty?QuestionFactory.editQuestion(vm.courseCode,vm.assignmentID,vm.question).then(function(res){$scope.editing=!1}):$scope.editing=!1},this.addFillAnswer=function(){vm.question.fillAnswers.push("")},this.deleteFillAnswer=function(index){vm.question.fillAnswers.splice(index,1)},this.addMCOption=function(){vm.question.answerOptions.push("")},this.deleteMCOption=function(index){vm.question.answerOptions.splice(index,1)}}]).controller("ExerciseController",["$scope","UserInfo",function($scope,UserInfo){var vm=this;vm.exercise=$scope.$parent.content,this.logQuestion=function(){console.log(vm.exercise)}}]).controller("ExerciseEditController",["$scope","$stateParams","UserInfo","QuestionFactory",function($scope,$stateParams,UserInfo,QuestionFactory){var vm=this;vm.courseCode=$stateParams.courseCode,vm.assignmentID=$stateParams.assignmentID,$scope.$on("EXERCISE_DELETE",function(event,exerciseIndex){vm.exercise.exerciseIndex>exerciseIndex&&vm.exercise.exerciseIndex--}),vm.exercise=$scope.$parent.content}])}(),function(){angular.module("assignments").directive("question",function(){return{restrict:"E",templateUrl:"/angular/assignments/partials/question.html",controller:"QuestionController",controllerAs:"questionCtrl"}}).directive("questionEdit",function(){return{restrict:"E",templateUrl:"/angular/assignments/partials/questionEdit.html",controller:"QuestionEditController",controllerAs:"questionEditCtrl"}}).directive("exercise",function(){return{restrict:"E",templateUrl:"/angular/assignments/partials/exercise.html",controller:"ExerciseController",controllerAs:"exerciseCtrl"}}).directive("exerciseEdit",function(){return{restrict:"E",templateUrl:"/angular/assignments/partials/exerciseEdit.html",controller:"ExerciseEditController",controllerAs:"exerciseEditCtrl"}})}(),function(){angular.module("assignments").config(["$stateProvider",function($stateProvider){$stateProvider.state("root.assignment",{url:"/course/:courseCode/assignment/:assignmentID",templateUrl:"/angular/assignments/partials/assignment.html",controller:"AssignmentController",controllerAs:"assignmentCtrl"})}])}(),function(){angular.module("assignments").factory("AssignmentFactory",["$http",function($http){function createAssignment(courseCode,newAssignment){return $http.post("/api/course/"+courseCode+"/assignment/create",newAssignment).then(function(res){return res.data})}function getAssignment(courseCode,assignmentID){return $http.get("/api/course/"+courseCode+"/assignment/"+assignmentID).then(function(res){var assignment=res.data,eI=0,qI=0,fI=0;assignment.content=new Array(assignment.questions.length+assignment.exercises.length),console.log(assignment);for(var i=0;i<assignment.contentOrder.length;i++)"exercise"===assignment.contentOrder[i]?(assignment.content[i]=assignment.exercises[eI],assignment.content[i].type="exercise",assignment.content[i].exerciseIndex=eI,eI++):"question"===assignment.contentOrder[i]&&(assignment.content[i]=assignment.questions[qI],assignment.content[i].type="question",assignment.content[i].questionIndex=qI,qI++,"frq"===assignment.content[i].questionType&&(assignment.content[i].frqIndex=fI,fI++));return assignment},function(res){})}return{createAssignment:createAssignment,getAssignment:getAssignment}}]).factory("QuestionFactory",["$http",function($http){function addQuestion(courseCode,assignmentID){return $http.post("/api/course/"+courseCode+"/assignment/"+assignmentID+"/question/create").then(function(res){var newQuestion=res.data;return newQuestion.type="question",newQuestion})}function editQuestion(courseCode,assignmentID,question){return $http.put("/api/course/"+courseCode+"/assignment/"+assignmentID+"/question/edit",question)}function deleteQuestion(courseCode,assignmentID,questionIndex){var question={questionIndex:questionIndex};return $http.post("/api/course/"+courseCode+"/assignment/"+assignmentID+"/question/delete",question)}return{addQuestion:addQuestion,editQuestion:editQuestion,deleteQuestion:deleteQuestion}}]).factory("ExerciseFactory",["$http",function($http){function addExercise(courseCode,assignmentID){return $http.post("/api/course/"+courseCode+"/assignment/"+assignmentID+"/exercise/create").then(function(res){var newExercise=res.data;return newExercise.type="exercise",newExercise})}function deleteExercise(courseCode,assignmentID,exerciseIndex){var exercise={exerciseIndex:exerciseIndex};return $http.post("/api/course/"+courseCode+"/assignment/"+assignmentID+"/exercise/delete",exercise)}return{addExercise:addExercise,deleteExercise:deleteExercise}}])}(),function(){angular.module("user").controller("DashboardController",["$state","$http","CourseFactory","UserInfo",function($state,$http,CourseFactory,UserInfo){var vm=this;this.newCourse={},this.courses=null,this.user=UserInfo.getUser();var getCourses=function(){CourseFactory.getCourses().then(function(res){vm.courses=res.data},function(res){})};this.createCourse=function(){CourseFactory.createCourse(vm.newCourse).then(function(res){console.log(res)})},getCourses()}]),angular.module("user").controller("CourseController",["$state","$http","$stateParams","UserInfo","CourseFactory","AssignmentFactory",function($state,$http,$stateParams,UserInfo,CourseFactory,AssignmentFactory){var vm=this;vm.course=null,vm.user=UserInfo.getUser(),vm.newAssignment={};var getCourse=function(){CourseFactory.getCourse($stateParams.courseCode).then(function(res){vm.course=res.data},function(res){})};this.createAssignment=function(){AssignmentFactory.createAssignment($stateParams.courseCode,vm.newAssignment).then(function(assignment){vm.course.assignments.push(assignment)},function(res){})},getCourse()}])}(),function(){angular.module("user").config(["$stateProvider",function($stateProvider){$stateProvider.state("root.main.dashboard",{templateUrl:"/angular/courses/partials/dashboard.html",controller:"DashboardController",controllerAs:"dashboardCtrl"}),$stateProvider.state("root.course",{url:"/course/:courseCode",templateUrl:"/angular/courses/partials/course.html",controller:"CourseController",controllerAs:"courseCtrl"})}])}(),function(){angular.module("courses").factory("CourseFactory",["$http",function($http){function createCourse(newCourse){return $http.post("/api/course/create",newCourse)}function getCourse(courseCode){return $http.get("/api/course/"+courseCode)}function getCourses(){return $http.get("/api/course")}return{createCourse:createCourse,getCourse:getCourse,getCourses:getCourses}}])}(),function(){angular.module("general").controller("NavController",["$rootScope","$scope","$http","AuthService","AuthResolver","$state",function($rootScope,$scope,$http,AuthService,AuthResolver,$state){var vm=this;vm.$state=$state,vm.bLoggedIn=null,vm.homeState="root.main.dashboard",console.log($rootScope);var checkAuth=function(){AuthResolver.bIsResolved()?vm.bLoggedIn=AuthService.isAuthenticated():AuthResolver.resolve().then(function(){vm.bLoggedIn=AuthService.isAuthenticated()})};$rootScope.$watch("currentUser",function(){checkAuth()}),$scope.$watch("navCtrl.bLoggedIn",function(bLoggedIn){bLoggedIn?vm.homeState="root.main.dashboard":vm.homeState="root.main.public"}),checkAuth()}])}(),function(){angular.module("general").config(["$stateProvider",function($stateProvider){$stateProvider.state("root",{"abstract":!0,template:"<ui-view/>",resolve:{auth:["AuthResolver",function(AuthResolver){return AuthResolver.bIsResolved()===!0||AuthResolver.resolve()}]}}).state("root.main",{url:"/",template:"<ui-view/>",data:{bIsPublic:!0},controller:["$state","AuthService",function($state,AuthService){AuthService.isAuthenticated()?$state.go("root.main.dashboard"):$state.go("root.main.public")}]}).state("root.main.public",{templateUrl:"/angular/general/partials/index.html",data:{bIsPublic:!0},controller:function(){console.log("Hit public index")}})}])}(),function(){"use strict";function clickOutside($document,$parse,$timeout){return{restrict:"A",link:function($scope,elem,attr){console.log("hi"),$timeout(function(){function eventHandler(e){if(!angular.element(elem).hasClass("ng-hide")){var element,i=0;if(e&&e.target){for(element=e.target;element;element=element.parentNode){var id=element.id,classNames=element.className,l=classList.length;for(classNames&&void 0!==classNames.baseVal&&(classNames=classNames.baseVal),i=0;l>i;i++)if(void 0!==id&&id===classList[i]||classNames&&classNames===classList[i])return}return $scope.$apply(function(){return(fn=$parse(attr.clickOutside))($scope)})}}}function _hasTouch(){return"ontouchstart"in window||navigator.maxTouchPoints}var fn,classList=void 0!==attr.outsideIfNot?attr.outsideIfNot.replace(", ",",").split(","):[];void 0!==attr.id&&classList.push(attr.id),_hasTouch()&&$document.on("touchstart",eventHandler),$document.on("click",eventHandler),$scope.$on("$destroy",function(){_hasTouch()&&$document.off("touchstart",eventHandler),$document.off("click",eventHandler)})})}}}clickOutside.$inject=["$document","$parse","$timeout"],angular.module("misc").directive("clickOutside",clickOutside)}(),function(){angular.module("user").controller("LoginController",["$state","$rootScope","AuthService",function($state,$rootScope,AuthService){var vm=this;vm.authMessage="",vm.user={email:"",password:""},this.login=function(){AuthService.login(vm.user).then(function(res){$state.go("root.main")},function(res){vm.authMessage=res.data.userMessage})}}]).controller("LogoutController",["$http","$state","UserInfo",function($http,$state,UserInfo){$http.post("/api/user/logout").then(function(){UserInfo.destroyUser(),$state.go("root.main.public")})}]).controller("JoinController",["$state","$rootScope","AuthService",function($state,$rootScope,AuthService){var vm=this;vm.authMessage="",vm.user={firstName:"",lastName:"",retypePassword:"",password:"",email:"",accountType:""},this.signup=function(){AuthService.signup(vm.user).then(function(res){$state.go("root.main")},function(res){vm.authMessage=res.data.userMessage})}}]).controller("ProfileController",["$state","UserInfo",function($state,UserInfo){this.user=UserInfo.getUser()}])}(),function(){angular.module("user").config(["$stateProvider",function($stateProvider){$stateProvider.state("root.login",{url:"/login",templateUrl:"/angular/user/partials/login.html",data:{bIsPublic:!0},controller:"LoginController",controllerAs:"loginCtrl"}),$stateProvider.state("root.logout",{url:"/logout",controller:"LogoutController"}),$stateProvider.state("root.join",{url:"/join",templateUrl:"/angular/user/partials/join.html",data:{bIsPublic:!0},controller:"JoinController",controllerAs:"joinCtrl"}),$stateProvider.state("root.profile",{url:"/profile",templateUrl:"/angular/user/partials/profile.html",controller:"ProfileController",controllerAs:"profileCtrl"})}])}(),function(){angular.module("user").factory("AuthService",["$http","UserInfo",function($http,UserInfo){function login(credentials){return $http.post("/auth/local",credentials).then(function(res){return UserInfo.setUser(res.data),res.data})}function signup(newUser){return $http.post("/api/user/join",newUser).then(function(res){return UserInfo.setUser(res.data),res.data},function(res){return res.data})}function retrieveProfile(){$http.get("/api/user").then(function(res){UserInfo.setUser(res.data)},function(res){UserInfo.setUser({})})}function isAuthenticated(){return UserInfo.live()}return{login:login,signup:signup,isAuthenticated:isAuthenticated,retrieveProfile:retrieveProfile}}]),angular.module("user").factory("UserInfo",["$rootScope",function($rootScope){function live(){return Object.keys($rootScope.currentUser).length>0}function setUser(user){$rootScope.currentUser=user}function getUser(){return $rootScope.currentUser}function destroyUser(){$rootScope.currentUser={}}return{live:live,setUser:setUser,getUser:getUser,destroyUser:destroyUser}}]),angular.module("user").factory("AuthResolver",["$q","$rootScope","$state",function($q,$rootScope,$state){var bIsResolved=!1;return{resolve:function(){var deferred=$q.defer(),unwatch=$rootScope.$watch("currentUser",function(currentUser){angular.isDefined(currentUser)&&(currentUser?deferred.resolve(currentUser):deferred.reject(),bIsResolved=!0,unwatch())});return deferred.promise},bIsResolved:function(){return bIsResolved}}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2lnbm1lbnRzL2Fzc2lnbm1lbnRzLm1vZHVsZS5qcyIsImNvdXJzZXMvY291cnNlcy5tb2R1bGUuanMiLCJnZW5lcmFsL2dlbmVyYWwubW9kdWxlLmpzIiwibWlzYy9taXNjLm1vZHVsZS5qcyIsInVzZXIvdXNlci5tb2R1bGUuanMiLCJjb3JlLmpzIiwiYXNzaWdubWVudHMvYXNzaWdubWVudHMuY3RybC5qcyIsIm1haW4ubWluLmpzIiwiYXNzaWdubWVudHMvYXNzaWdubWVudHMuZGlyLmpzIiwiYXNzaWdubWVudHMvYXNzaWdubWVudHMuc3RhdGVzLmpzIiwiYXNzaWdubWVudHMvYXNzaWdubWVudHMuc3ZjLmpzIiwiY291cnNlcy9jb3Vyc2VzLmN0cmwuanMiLCJjb3Vyc2VzL2NvdXJzZXMuc3RhdGVzLmpzIiwiY291cnNlcy9jb3Vyc2VzLnN2Yy5qcyIsImdlbmVyYWwvZ2VuZXJhbC5jdHJsLmpzIiwiZ2VuZXJhbC9nZW5lcmFsLnN0YXRlcy5qcyIsIm1pc2MvY2xpY2tvdXRzaWRlLmRpci5qcyIsInVzZXIvdXNlci5jdHJsLmpzIiwidXNlci91c2VyLnN0YXRlcy5qcyIsInVzZXIvdXNlci5zdmMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRwcm92aWRlIiwiZGVjb3JhdG9yIiwidGFPcHRpb25zIiwidG9vbGJhciIsInJ1biIsIiRodHRwIiwiQXV0aFNlcnZpY2UiLCJyZXRyaWV2ZVByb2ZpbGUiLCJhcHAiLCIkbG9jYXRpb25Qcm92aWRlciIsImh0bWw1TW9kZSIsIiRyb290U2NvcGUiLCIkc3RhdGUiLCJBdXRoUmVzb2x2ZXIiLCIkb24iLCJldmVudCIsIm5leHQiLCJlbnN1cmVBdXRoIiwiYklzTG9nZ2VkSW4iLCJkYXRhIiwiYklzUHVibGljIiwicHJldmVudERlZmF1bHQiLCJnbyIsImJJc1Jlc29sdmVkIiwiY29uc29sZSIsImxvZyIsImlzQXV0aGVudGljYXRlZCIsInJlc29sdmUiLCJ0aGVuIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRzdGF0ZVBhcmFtcyIsIlVzZXJJbmZvIiwiQXNzaWdubWVudEZhY3RvcnkiLCJRdWVzdGlvbkZhY3RvcnkiLCJFeGVyY2lzZUZhY3RvcnkiLCJ2bSIsInRoaXMiLCJ1c2VyIiwiZ2V0VXNlciIsImNvdXJzZUNvZGUiLCJhc3NpZ25tZW50SUQiLCJhc3NpZ25tZW50IiwiZ2V0QXNzaWdubWVudCIsImVyciIsImFkZFF1ZXN0aW9uIiwibmV3UXVlc3Rpb24iLCJxdWVzdGlvbkluZGV4IiwicXVlc3Rpb25zIiwibGVuZ3RoIiwiY29udGVudCIsInB1c2giLCJkZWxldGVRdWVzdGlvbiIsImNvbnRlbnRJbmRleCIsInNwbGljZSIsIiRicm9hZGNhc3QiLCJhZGRFeGVyY2lzZSIsIm5ld0V4ZXJjaXNlIiwiZXhlcmNpc2VJbmRleCIsImV4ZXJjaXNlcyIsImRlbGV0ZUV4ZXJjaXNlIiwicXVlc3Rpb24iLCIkcGFyZW50IiwibG9nUXVlc3Rpb24iLCJlZGl0UXVlc3Rpb24iLCJlZGl0Rm9ybSIsIiRkaXJ0eSIsInJlcyIsImVkaXRpbmciLCJhZGRGaWxsQW5zd2VyIiwiZmlsbEFuc3dlcnMiLCJkZWxldGVGaWxsQW5zd2VyIiwiaW5kZXgiLCJhZGRNQ09wdGlvbiIsImFuc3dlck9wdGlvbnMiLCJkZWxldGVNQ09wdGlvbiIsImV4ZXJjaXNlIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXJBcyIsIiRzdGF0ZVByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJmYWN0b3J5IiwiY3JlYXRlQXNzaWdubWVudCIsIm5ld0Fzc2lnbm1lbnQiLCJwb3N0IiwiZ2V0IiwiZUkiLCJxSSIsImZJIiwiQXJyYXkiLCJpIiwiY29udGVudE9yZGVyIiwidHlwZSIsInF1ZXN0aW9uVHlwZSIsImZycUluZGV4IiwicHV0IiwiQ291cnNlRmFjdG9yeSIsIm5ld0NvdXJzZSIsImNvdXJzZXMiLCJnZXRDb3Vyc2VzIiwiY3JlYXRlQ291cnNlIiwiY291cnNlIiwiZ2V0Q291cnNlIiwiYXNzaWdubWVudHMiLCJiTG9nZ2VkSW4iLCJob21lU3RhdGUiLCJjaGVja0F1dGgiLCIkd2F0Y2giLCJhYnN0cmFjdCIsInRlbXBsYXRlIiwiYXV0aCIsImNsaWNrT3V0c2lkZSIsIiRkb2N1bWVudCIsIiRwYXJzZSIsIiR0aW1lb3V0IiwibGluayIsImVsZW0iLCJhdHRyIiwiZXZlbnRIYW5kbGVyIiwiZSIsImVsZW1lbnQiLCJoYXNDbGFzcyIsInRhcmdldCIsInBhcmVudE5vZGUiLCJpZCIsImNsYXNzTmFtZXMiLCJjbGFzc05hbWUiLCJsIiwiY2xhc3NMaXN0IiwidW5kZWZpbmVkIiwiYmFzZVZhbCIsIiRhcHBseSIsImZuIiwiX2hhc1RvdWNoIiwid2luZG93IiwibmF2aWdhdG9yIiwibWF4VG91Y2hQb2ludHMiLCJvdXRzaWRlSWZOb3QiLCJyZXBsYWNlIiwic3BsaXQiLCJvbiIsIm9mZiIsIiRpbmplY3QiLCJhdXRoTWVzc2FnZSIsImVtYWlsIiwicGFzc3dvcmQiLCJsb2dpbiIsInVzZXJNZXNzYWdlIiwiZGVzdHJveVVzZXIiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInJldHlwZVBhc3N3b3JkIiwiYWNjb3VudFR5cGUiLCJzaWdudXAiLCJjcmVkZW50aWFscyIsInNldFVzZXIiLCJuZXdVc2VyIiwibGl2ZSIsIk9iamVjdCIsImtleXMiLCJjdXJyZW50VXNlciIsIiRxIiwiZGVmZXJyZWQiLCJkZWZlciIsInVud2F0Y2giLCJpc0RlZmluZWQiLCJyZWplY3QiLCJwcm9taXNlIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBQSxRQUFBQyxPQUFBLHFCQ0RBLFdBQ0FELFFBQUFDLE9BQUEsaUJDREEsV0FDQUQsUUFBQUMsT0FBQSxjQUVBQyxRQUFBLFdBQUEsU0FBQUMsVUFFQUEsU0FBQUMsVUFBQSxhQUFBLFlBQUEsU0FBQUMsV0FTQSxNQVJBQSxXQUFBQyxVQUNBLEtBQUEsS0FBQSxLQUFBLE1BQ0EsT0FBQSxVQUFBLGNBQ0EsS0FBQSxPQUNBLGNBQUEsZ0JBQUEs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cHAgPSBhbmd1bGFyLm1vZHVsZSgnYXNzaWdubWVudHMnLCBbXSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcblx0dmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdjb3Vyc2VzJywgW10pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnZ2VuZXJhbCcsIFtdKVxyXG5cclxuXHQuY29uZmlnKFsnJHByb3ZpZGUnLCBmdW5jdGlvbigkcHJvdmlkZSl7XHJcbiAgICAgICAgLy8gdGhpcyBkZW1vbnN0cmF0ZXMgaG93IHRvIHJlZ2lzdGVyIGEgbmV3IHRvb2wgYW5kIGFkZCBpdCB0byB0aGUgZGVmYXVsdCB0b29sYmFyXHJcbiAgICAgICAgJHByb3ZpZGUuZGVjb3JhdG9yKCd0YU9wdGlvbnMnLCBbJyRkZWxlZ2F0ZScsIGZ1bmN0aW9uKHRhT3B0aW9ucyl7XHJcbiAgICAgICAgICAgIHRhT3B0aW9ucy50b29sYmFyID0gW1xyXG4gICAgICAgICAgICBcdFsnaDEnLCdoMicsJ2gzJywgJ3AnXSxcclxuICAgICAgICAgICAgXHRbJ2JvbGQnLCdpdGFsaWNzJywndW5kZXJsaW5lJ10sIFxyXG4gICAgICAgICAgICBcdFsndWwnLCAnb2wnXSwgXHJcbiAgICAgICAgICAgIFx0WydqdXN0aWZ5TGVmdCcsICdqdXN0aWZ5Q2VudGVyJywnanVzdGlmeVJpZ2h0J10sIFxyXG4gICAgICAgICAgICBcdFsnaW5zZXJ0SW1hZ2UnLCAnaW5zZXJ0TGluaycsJ2luc2VydFZpZGVvJ10sIFxyXG4gICAgICAgICAgICBcdFsnaHRtbCddXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHJldHVybiB0YU9wdGlvbnM7IC8vIHdoYXRldmVyIHlvdSByZXR1cm4gd2lsbCBiZSB0aGUgdGFPcHRpb25zXHJcbiAgICAgICAgfV0pO1xyXG4gICAgfV0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbWlzYycsIFtdKTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHR2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3VzZXInLCBbXSlcclxuXHQucnVuKGZ1bmN0aW9uKCRodHRwLCBBdXRoU2VydmljZSl7XHJcblx0XHRBdXRoU2VydmljZS5yZXRyaWV2ZVByb2ZpbGUoKTtcclxuXHR9KTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHR2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2dyYWRlcicsIFxyXG5cdFx0W1xyXG5cdFx0XHQndWkucm91dGVyJyxcclxuXHRcdFx0J3RleHRBbmd1bGFyJyxcclxuXHRcdFx0J2dlbmVyYWwnLFxyXG5cdFx0XHQnY291cnNlcycsXHJcblx0XHRcdCd1c2VyJyxcclxuXHRcdFx0J2Fzc2lnbm1lbnRzJyxcclxuXHRcdFx0J21pc2MnXHJcblx0XHRdKTtcclxuXHJcblx0Ly9yZW1vdmUgdGhlIGhhc2hcclxuXHRhcHAuY29uZmlnKFsnJGxvY2F0aW9uUHJvdmlkZXInLCBmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlcil7XHJcblx0XHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcblx0fV0pO1xyXG5cdFxyXG5cdGFwcC5ydW4oZnVuY3Rpb24gKCRyb290U2NvcGUsICRzdGF0ZSwgQXV0aFNlcnZpY2UsIEF1dGhSZXNvbHZlcikge1xyXG4gIFx0XHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQsIG5leHQpIHtcclxuXHJcblx0XHRcdHZhciBlbnN1cmVBdXRoID0gZnVuY3Rpb24oZXZlbnQsIGJJc0xvZ2dlZEluKXtcclxuXHRcdFx0XHRpZiAoIWJJc0xvZ2dlZEluICYmICh0eXBlb2YgbmV4dC5kYXRhID09PSAndW5kZWZpbmVkJyB8fCBuZXh0LmRhdGEuYklzUHVibGljICE9PSB0cnVlKSl7XHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0JHN0YXRlLmdvKCdyb290LmxvZ2luJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG4gIFx0XHRcdGlmIChBdXRoUmVzb2x2ZXIuYklzUmVzb2x2ZWQoKSl7XHJcbiAgXHRcdFx0XHRjb25zb2xlLmxvZygnc3RhdGVDaGFuZ2VTdGFydCByZXNvbHZlZCcpO1xyXG4gIFx0XHRcdFx0Y29uc29sZS5sb2coJ2F1dGg6ICcgKyBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSk7XHJcbiAgXHRcdFx0XHRlbnN1cmVBdXRoKGV2ZW50LCBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSk7XHJcbiAgXHRcdFx0fWVsc2V7XHJcbiAgXHRcdFx0XHRBdXRoUmVzb2x2ZXIucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdzdGF0ZUNoYW5nZVN0YXJ0IG5vdCByZXNvbHZlZCcpO1xyXG4gIFx0XHRcdFx0XHRjb25zb2xlLmxvZygnYXV0aDogJyArIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKTtcclxuICBcdFx0XHRcdFx0ZW5zdXJlQXV0aChldmVudCwgQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpO1xyXG4gIFx0XHRcdFx0fSk7XHJcbiAgXHRcdFx0fVxyXG4gIFx0XHR9KTtcclxuXHR9KTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgnYXNzaWdubWVudHMnKVxyXG5cclxuXHQuY29udHJvbGxlcignQXNzaWdubWVudENvbnRyb2xsZXInLCBcclxuXHRcdGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlUGFyYW1zLCBVc2VySW5mbywgQXNzaWdubWVudEZhY3RvcnksIFF1ZXN0aW9uRmFjdG9yeSwgRXhlcmNpc2VGYWN0b3J5KXtcclxuXHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0udXNlciA9IFVzZXJJbmZvLmdldFVzZXIoKTtcclxuXHRcdHZtLmNvdXJzZUNvZGUgPSAkc3RhdGVQYXJhbXMuY291cnNlQ29kZTtcclxuXHRcdHZtLmFzc2lnbm1lbnRJRCA9ICRzdGF0ZVBhcmFtcy5hc3NpZ25tZW50SUQ7XHJcblxyXG5cdFx0dm0uYXNzaWdubWVudCA9IHt9O1xyXG5cclxuXHRcdHZhciBnZXRBc3NpZ25tZW50ID0gZnVuY3Rpb24oKXtcclxuIFx0XHRcdEFzc2lnbm1lbnRGYWN0b3J5LmdldEFzc2lnbm1lbnQodm0uY291cnNlQ29kZSwgdm0uYXNzaWdubWVudElEKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MoYXNzaWdubWVudCl7XHJcblx0XHRcdFx0XHR2bS5hc3NpZ25tZW50ID0gYXNzaWdubWVudDtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGZ1bmN0aW9uIEZhaWx1cmUoZXJyKXtcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuYWRkUXVlc3Rpb24gPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRRdWVzdGlvbkZhY3RvcnkuYWRkUXVlc3Rpb24odm0uY291cnNlQ29kZSwgdm0uYXNzaWdubWVudElEKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MobmV3UXVlc3Rpb24pe1xyXG5cdFx0XHRcdFx0bmV3UXVlc3Rpb24ucXVlc3Rpb25JbmRleCA9IHZtLmFzc2lnbm1lbnQucXVlc3Rpb25zLmxlbmd0aDtcclxuXHRcdFx0XHRcdHZtLmFzc2lnbm1lbnQuY29udGVudC5wdXNoKG5ld1F1ZXN0aW9uKTtcclxuXHRcdFx0XHRcdHZtLmFzc2lnbm1lbnQucXVlc3Rpb25zLnB1c2gobmV3UXVlc3Rpb24pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dGhpcy5kZWxldGVRdWVzdGlvbiA9IGZ1bmN0aW9uKGNvbnRlbnRJbmRleCwgcXVlc3Rpb25JbmRleCl7XHJcblx0XHRcdFF1ZXN0aW9uRmFjdG9yeS5kZWxldGVRdWVzdGlvbih2bS5jb3Vyc2VDb2RlLCB2bS5hc3NpZ25tZW50SUQsIHF1ZXN0aW9uSW5kZXgpLnRoZW4oXHJcblx0XHRcdFx0ZnVuY3Rpb24gU3VjY2Vzcygpe1xyXG5cdFx0XHRcdFx0dm0uYXNzaWdubWVudC5jb250ZW50LnNwbGljZShjb250ZW50SW5kZXgsIDEpO1xyXG5cdFx0XHRcdFx0dm0uYXNzaWdubWVudC5xdWVzdGlvbnMuc3BsaWNlKHF1ZXN0aW9uSW5kZXgsIDEpO1xyXG5cdFx0XHRcdFx0JHNjb3BlLiRicm9hZGNhc3QoJ1FVRVNUSU9OX0RFTEVURScsIHF1ZXN0aW9uSW5kZXgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmFkZEV4ZXJjaXNlID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0RXhlcmNpc2VGYWN0b3J5LmFkZEV4ZXJjaXNlKHZtLmNvdXJzZUNvZGUsIHZtLmFzc2lnbm1lbnRJRCkudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiBTdWNjZXNzKG5ld0V4ZXJjaXNlKXtcclxuXHRcdFx0XHRcdG5ld0V4ZXJjaXNlLmV4ZXJjaXNlSW5kZXggPSB2bS5hc3NpZ25tZW50LmV4ZXJjaXNlcy5sZW5ndGg7XHJcblx0XHRcdFx0XHR2bS5hc3NpZ25tZW50LmNvbnRlbnQucHVzaChuZXdFeGVyY2lzZSk7XHJcblx0XHRcdFx0XHR2bS5hc3NpZ25tZW50LmV4ZXJjaXNlcy5wdXNoKG5ld0V4ZXJjaXNlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5kZWxldGVFeGVyY2lzZSA9IGZ1bmN0aW9uKGNvbnRlbnRJbmRleCwgZXhlcmNpc2VJbmRleCl7XHJcblx0XHRcdEV4ZXJjaXNlRmFjdG9yeS5kZWxldGVFeGVyY2lzZSh2bS5jb3Vyc2VDb2RlLCB2bS5hc3NpZ25tZW50SUQsIGV4ZXJjaXNlSW5kZXgpLnRoZW4oXHJcblx0XHRcdFx0ZnVuY3Rpb24gU3VjY2Vzcygpe1xyXG5cdFx0XHRcdFx0dm0uYXNzaWdubWVudC5jb250ZW50LnNwbGljZShjb250ZW50SW5kZXgsIDEpO1xyXG5cdFx0XHRcdFx0dm0uYXNzaWdubWVudC5leGVyY2lzZXMuc3BsaWNlKGV4ZXJjaXNlSW5kZXgsIDEpO1xyXG5cdFx0XHRcdFx0JHNjb3BlLiRicm9hZGNhc3QoJ0VYRVJDSVNFX0RFTEVURScsIGV4ZXJjaXNlSW5kZXgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRnZXRBc3NpZ25tZW50KCk7XHJcblx0fSlcclxuXHJcblx0LmNvbnRyb2xsZXIoJ1F1ZXN0aW9uQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgVXNlckluZm8pe1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHJcblx0XHQvL2dldCB0aGUgcXVlc3Rpb24gY29udGVudHMgZnJvbSB0aGUgcGFyZW50IHNjb3BlXHJcblx0XHR2bS5xdWVzdGlvbiA9ICRzY29wZS4kcGFyZW50LmNvbnRlbnQ7XHJcblx0XHRcclxuXHRcdHRoaXMubG9nUXVlc3Rpb24gPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyh2bS5xdWVzdGlvbik7XHJcblx0XHR9XHJcblx0fSlcclxuXHJcblx0LmNvbnRyb2xsZXIoJ1F1ZXN0aW9uRWRpdENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgVXNlckluZm8sIFF1ZXN0aW9uRmFjdG9yeSl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uY291cnNlQ29kZSA9ICRzdGF0ZVBhcmFtcy5jb3Vyc2VDb2RlO1xyXG5cdFx0dm0uYXNzaWdubWVudElEID0gJHN0YXRlUGFyYW1zLmFzc2lnbm1lbnRJRDtcclxuXHRcdFxyXG5cdFx0Ly9nZXQgdGhlIHF1ZXN0aW9uIGNvbnRlbnRzIGZyb20gdGhlIHBhcmVudCBzY29wZVxyXG5cdFx0dm0ucXVlc3Rpb24gPSAkc2NvcGUuJHBhcmVudC5jb250ZW50O1xyXG5cclxuXHRcdCRzY29wZS4kb24oJ1FVRVNUSU9OX0RFTEVURScsIGZ1bmN0aW9uKGV2ZW50LCBxdWVzdGlvbkluZGV4KXtcclxuXHRcdFx0aWYgKHZtLnF1ZXN0aW9uLnF1ZXN0aW9uSW5kZXggPiBxdWVzdGlvbkluZGV4KXtcclxuXHRcdFx0XHR2bS5xdWVzdGlvbi5xdWVzdGlvbkluZGV4LS07XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuZWRpdFF1ZXN0aW9uID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYgKCRzY29wZS5lZGl0Rm9ybS4kZGlydHkpe1xyXG5cdFx0XHRcdFF1ZXN0aW9uRmFjdG9yeS5lZGl0UXVlc3Rpb24odm0uY291cnNlQ29kZSwgdm0uYXNzaWdubWVudElELCB2bS5xdWVzdGlvbikudGhlbihcclxuXHRcdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLmVkaXRpbmcgPSBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHQpXHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCRzY29wZS5lZGl0aW5nID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmFkZEZpbGxBbnN3ZXIgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR2bS5xdWVzdGlvbi5maWxsQW5zd2Vycy5wdXNoKCcnKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmRlbGV0ZUZpbGxBbnN3ZXIgPSBmdW5jdGlvbihpbmRleCl7XHJcblx0XHRcdHZtLnF1ZXN0aW9uLmZpbGxBbnN3ZXJzLnNwbGljZShpbmRleCwgMSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hZGRNQ09wdGlvbiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZtLnF1ZXN0aW9uLmFuc3dlck9wdGlvbnMucHVzaCgnJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5kZWxldGVNQ09wdGlvbiA9IGZ1bmN0aW9uKGluZGV4KXtcclxuXHRcdFx0dm0ucXVlc3Rpb24uYW5zd2VyT3B0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdFx0fVxyXG5cdH0pXHJcblxyXG5cdC5jb250cm9sbGVyKCdFeGVyY2lzZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsIFVzZXJJbmZvKXtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdFx0Ly9nZXQgdGhlIGV4ZXJjaXNlIGNvbnRlbnRzIGZyb20gdGhlIHBhcmVudCBzY29wZVxyXG5cdFx0dm0uZXhlcmNpc2UgPSAkc2NvcGUuJHBhcmVudC5jb250ZW50O1xyXG5cdFx0XHJcblx0XHR0aGlzLmxvZ1F1ZXN0aW9uID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0Y29uc29sZS5sb2codm0uZXhlcmNpc2UpO1xyXG5cdFx0fVxyXG5cdH0pXHJcblxyXG5cdC5jb250cm9sbGVyKCdFeGVyY2lzZUVkaXRDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGVQYXJhbXMsIFVzZXJJbmZvLCBRdWVzdGlvbkZhY3Rvcnkpe1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLmNvdXJzZUNvZGUgPSAkc3RhdGVQYXJhbXMuY291cnNlQ29kZTtcclxuXHRcdHZtLmFzc2lnbm1lbnRJRCA9ICRzdGF0ZVBhcmFtcy5hc3NpZ25tZW50SUQ7XHJcblx0XHRcclxuXHRcdCRzY29wZS4kb24oJ0VYRVJDSVNFX0RFTEVURScsIGZ1bmN0aW9uKGV2ZW50LCBleGVyY2lzZUluZGV4KXtcclxuXHRcdFx0aWYgKHZtLmV4ZXJjaXNlLmV4ZXJjaXNlSW5kZXggPiBleGVyY2lzZUluZGV4KXtcclxuXHRcdFx0XHR2bS5leGVyY2lzZS5leGVyY2lzZUluZGV4LS07XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vZ2V0IHRoZSBleGVyY2lzZSBjb250ZW50cyBmcm9tIHRoZSBwYXJlbnQgc2NvcGVcclxuXHRcdHZtLmV4ZXJjaXNlID0gJHNjb3BlLiRwYXJlbnQuY29udGVudDtcclxuXHR9KVxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXNzaWdubWVudHMnLCBbXSk7XHJcbn0pKCk7XG4oZnVuY3Rpb24oKXtcclxuXHR2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2NvdXJzZXMnLCBbXSk7XHJcbn0pKCk7XG4oZnVuY3Rpb24oKXtcclxuXHR2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2dlbmVyYWwnLCBbXSlcclxuXHJcblx0LmNvbmZpZyhbJyRwcm92aWRlJywgZnVuY3Rpb24oJHByb3ZpZGUpe1xyXG4gICAgICAgIC8vIHRoaXMgZGVtb25zdHJhdGVzIGhvdyB0byByZWdpc3RlciBhIG5ldyB0b29sIGFuZCBhZGQgaXQgdG8gdGhlIGRlZmF1bHQgdG9vbGJhclxyXG4gICAgICAgICRwcm92aWRlLmRlY29yYXRvcigndGFPcHRpb25zJywgWyckZGVsZWdhdGUnLCBmdW5jdGlvbih0YU9wdGlvbnMpe1xyXG4gICAgICAgICAgICB0YU9wdGlvbnMudG9vbGJhciA9IFtcclxuICAgICAgICAgICAgXHRbJ2gxJywnaDInLCdoMycsICdwJ10sXHJcbiAgICAgICAgICAgIFx0Wydib2xkJywnaXRhbGljcycsJ3VuZGVybGluZSddLCBcclxuICAgICAgICAgICAgXHRbJ3VsJywgJ29sJ10sIFxyXG4gICAgICAgICAgICBcdFsnanVzdGlmeUxlZnQnLCAnanVzdGlmeUNlbnRlcicsJ2p1c3RpZnlSaWdodCddLCBcclxuICAgICAgICAgICAgXHRbJ2luc2VydEltYWdlJywgJ2luc2VydExpbmsnLCdpbnNlcnRWaWRlbyddLCBcclxuICAgICAgICAgICAgXHRbJ2h0bWwnXVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFPcHRpb25zOyAvLyB3aGF0ZXZlciB5b3UgcmV0dXJuIHdpbGwgYmUgdGhlIHRhT3B0aW9uc1xyXG4gICAgICAgIH1dKTtcclxuICAgIH1dKTtcclxufSkoKTtcbihmdW5jdGlvbigpe1xyXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbWlzYycsIFtdKTtcclxufSkoKTtcbihmdW5jdGlvbigpe1xyXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgndXNlcicsIFtdKVxyXG5cdC5ydW4oW1wiJGh0dHBcIiwgXCJBdXRoU2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCwgQXV0aFNlcnZpY2Upe1xyXG5cdFx0QXV0aFNlcnZpY2UucmV0cmlldmVQcm9maWxlKCk7XHJcblx0fV0pO1xyXG59KSgpO1xuKGZ1bmN0aW9uKCl7XHJcblx0dmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdncmFkZXInLCBcclxuXHRcdFtcclxuXHRcdFx0J3VpLnJvdXRlcicsXHJcblx0XHRcdCd0ZXh0QW5ndWxhcicsXHJcblx0XHRcdCdnZW5lcmFsJyxcclxuXHRcdFx0J2NvdXJzZXMnLFxyXG5cdFx0XHQndXNlcicsXHJcblx0XHRcdCdhc3NpZ25tZW50cycsXHJcblx0XHRcdCdtaXNjJ1xyXG5cdFx0XSk7XHJcblxyXG5cdC8vcmVtb3ZlIHRoZSBoYXNoXHJcblx0YXBwLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIpe1xyXG5cdFx0JGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG5cdH1dKTtcclxuXHRcclxuXHRhcHAucnVuKFtcIiRyb290U2NvcGVcIiwgXCIkc3RhdGVcIiwgXCJBdXRoU2VydmljZVwiLCBcIkF1dGhSZXNvbHZlclwiLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHN0YXRlLCBBdXRoU2VydmljZSwgQXV0aFJlc29sdmVyKSB7XHJcbiAgXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uIChldmVudCwgbmV4dCkge1xyXG5cclxuXHRcdFx0dmFyIGVuc3VyZUF1dGggPSBmdW5jdGlvbihldmVudCwgYklzTG9nZ2VkSW4pe1xyXG5cdFx0XHRcdGlmICghYklzTG9nZ2VkSW4gJiYgKHR5cGVvZiBuZXh0LmRhdGEgPT09ICd1bmRlZmluZWQnIHx8IG5leHQuZGF0YS5iSXNQdWJsaWMgIT09IHRydWUpKXtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ3Jvb3QubG9naW4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcbiAgXHRcdFx0aWYgKEF1dGhSZXNvbHZlci5iSXNSZXNvbHZlZCgpKXtcclxuICBcdFx0XHRcdGNvbnNvbGUubG9nKCdzdGF0ZUNoYW5nZVN0YXJ0IHJlc29sdmVkJyk7XHJcbiAgXHRcdFx0XHRjb25zb2xlLmxvZygnYXV0aDogJyArIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKTtcclxuICBcdFx0XHRcdGVuc3VyZUF1dGgoZXZlbnQsIEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKTtcclxuICBcdFx0XHR9ZWxzZXtcclxuICBcdFx0XHRcdEF1dGhSZXNvbHZlci5yZXNvbHZlKCkudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICBcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3N0YXRlQ2hhbmdlU3RhcnQgbm90IHJlc29sdmVkJyk7XHJcbiAgXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdhdXRoOiAnICsgQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpO1xyXG4gIFx0XHRcdFx0XHRlbnN1cmVBdXRoKGV2ZW50LCBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSk7XHJcbiAgXHRcdFx0XHR9KTtcclxuICBcdFx0XHR9XHJcbiAgXHRcdH0pO1xyXG5cdH1dKTtcclxufSkoKTtcbihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdhc3NpZ25tZW50cycpXHJcblxyXG5cdC5jb250cm9sbGVyKCdBc3NpZ25tZW50Q29udHJvbGxlcicsIFxyXG5cdFx0W1wiJHNjb3BlXCIsIFwiJHN0YXRlUGFyYW1zXCIsIFwiVXNlckluZm9cIiwgXCJBc3NpZ25tZW50RmFjdG9yeVwiLCBcIlF1ZXN0aW9uRmFjdG9yeVwiLCBcIkV4ZXJjaXNlRmFjdG9yeVwiLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgVXNlckluZm8sIEFzc2lnbm1lbnRGYWN0b3J5LCBRdWVzdGlvbkZhY3RvcnksIEV4ZXJjaXNlRmFjdG9yeSl7XHJcblxyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLnVzZXIgPSBVc2VySW5mby5nZXRVc2VyKCk7XHJcblx0XHR2bS5jb3Vyc2VDb2RlID0gJHN0YXRlUGFyYW1zLmNvdXJzZUNvZGU7XHJcblx0XHR2bS5hc3NpZ25tZW50SUQgPSAkc3RhdGVQYXJhbXMuYXNzaWdubWVudElEO1xyXG5cclxuXHRcdHZtLmFzc2lnbm1lbnQgPSB7fTtcclxuXHJcblx0XHR2YXIgZ2V0QXNzaWdubWVudCA9IGZ1bmN0aW9uKCl7XHJcbiBcdFx0XHRBc3NpZ25tZW50RmFjdG9yeS5nZXRBc3NpZ25tZW50KHZtLmNvdXJzZUNvZGUsIHZtLmFzc2lnbm1lbnRJRCkudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiBTdWNjZXNzKGFzc2lnbm1lbnQpe1xyXG5cdFx0XHRcdFx0dm0uYXNzaWdubWVudCA9IGFzc2lnbm1lbnQ7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRmdW5jdGlvbiBGYWlsdXJlKGVycil7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmFkZFF1ZXN0aW9uID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0UXVlc3Rpb25GYWN0b3J5LmFkZFF1ZXN0aW9uKHZtLmNvdXJzZUNvZGUsIHZtLmFzc2lnbm1lbnRJRCkudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiBTdWNjZXNzKG5ld1F1ZXN0aW9uKXtcclxuXHRcdFx0XHRcdG5ld1F1ZXN0aW9uLnF1ZXN0aW9uSW5kZXggPSB2bS5hc3NpZ25tZW50LnF1ZXN0aW9ucy5sZW5ndGg7XHJcblx0XHRcdFx0XHR2bS5hc3NpZ25tZW50LmNvbnRlbnQucHVzaChuZXdRdWVzdGlvbik7XHJcblx0XHRcdFx0XHR2bS5hc3NpZ25tZW50LnF1ZXN0aW9ucy5wdXNoKG5ld1F1ZXN0aW9uKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHRoaXMuZGVsZXRlUXVlc3Rpb24gPSBmdW5jdGlvbihjb250ZW50SW5kZXgsIHF1ZXN0aW9uSW5kZXgpe1xyXG5cdFx0XHRRdWVzdGlvbkZhY3RvcnkuZGVsZXRlUXVlc3Rpb24odm0uY291cnNlQ29kZSwgdm0uYXNzaWdubWVudElELCBxdWVzdGlvbkluZGV4KS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MoKXtcclxuXHRcdFx0XHRcdHZtLmFzc2lnbm1lbnQuY29udGVudC5zcGxpY2UoY29udGVudEluZGV4LCAxKTtcclxuXHRcdFx0XHRcdHZtLmFzc2lnbm1lbnQucXVlc3Rpb25zLnNwbGljZShxdWVzdGlvbkluZGV4LCAxKTtcclxuXHRcdFx0XHRcdCRzY29wZS4kYnJvYWRjYXN0KCdRVUVTVElPTl9ERUxFVEUnLCBxdWVzdGlvbkluZGV4KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hZGRFeGVyY2lzZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdEV4ZXJjaXNlRmFjdG9yeS5hZGRFeGVyY2lzZSh2bS5jb3Vyc2VDb2RlLCB2bS5hc3NpZ25tZW50SUQpLnRoZW4oXHJcblx0XHRcdFx0ZnVuY3Rpb24gU3VjY2VzcyhuZXdFeGVyY2lzZSl7XHJcblx0XHRcdFx0XHRuZXdFeGVyY2lzZS5leGVyY2lzZUluZGV4ID0gdm0uYXNzaWdubWVudC5leGVyY2lzZXMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0dm0uYXNzaWdubWVudC5jb250ZW50LnB1c2gobmV3RXhlcmNpc2UpO1xyXG5cdFx0XHRcdFx0dm0uYXNzaWdubWVudC5leGVyY2lzZXMucHVzaChuZXdFeGVyY2lzZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZGVsZXRlRXhlcmNpc2UgPSBmdW5jdGlvbihjb250ZW50SW5kZXgsIGV4ZXJjaXNlSW5kZXgpe1xyXG5cdFx0XHRFeGVyY2lzZUZhY3RvcnkuZGVsZXRlRXhlcmNpc2Uodm0uY291cnNlQ29kZSwgdm0uYXNzaWdubWVudElELCBleGVyY2lzZUluZGV4KS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MoKXtcclxuXHRcdFx0XHRcdHZtLmFzc2lnbm1lbnQuY29udGVudC5zcGxpY2UoY29udGVudEluZGV4LCAxKTtcclxuXHRcdFx0XHRcdHZtLmFzc2lnbm1lbnQuZXhlcmNpc2VzLnNwbGljZShleGVyY2lzZUluZGV4LCAxKTtcclxuXHRcdFx0XHRcdCRzY29wZS4kYnJvYWRjYXN0KCdFWEVSQ0lTRV9ERUxFVEUnLCBleGVyY2lzZUluZGV4KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Z2V0QXNzaWdubWVudCgpO1xyXG5cdH1dKVxyXG5cclxuXHQuY29udHJvbGxlcignUXVlc3Rpb25Db250cm9sbGVyJywgW1wiJHNjb3BlXCIsIFwiVXNlckluZm9cIiwgZnVuY3Rpb24oJHNjb3BlLCBVc2VySW5mbyl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cclxuXHRcdC8vZ2V0IHRoZSBxdWVzdGlvbiBjb250ZW50cyBmcm9tIHRoZSBwYXJlbnQgc2NvcGVcclxuXHRcdHZtLnF1ZXN0aW9uID0gJHNjb3BlLiRwYXJlbnQuY29udGVudDtcclxuXHRcdFxyXG5cdFx0dGhpcy5sb2dRdWVzdGlvbiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGNvbnNvbGUubG9nKHZtLnF1ZXN0aW9uKTtcclxuXHRcdH1cclxuXHR9XSlcclxuXHJcblx0LmNvbnRyb2xsZXIoJ1F1ZXN0aW9uRWRpdENvbnRyb2xsZXInLCBbXCIkc2NvcGVcIiwgXCIkc3RhdGVQYXJhbXNcIiwgXCJVc2VySW5mb1wiLCBcIlF1ZXN0aW9uRmFjdG9yeVwiLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgVXNlckluZm8sIFF1ZXN0aW9uRmFjdG9yeSl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uY291cnNlQ29kZSA9ICRzdGF0ZVBhcmFtcy5jb3Vyc2VDb2RlO1xyXG5cdFx0dm0uYXNzaWdubWVudElEID0gJHN0YXRlUGFyYW1zLmFzc2lnbm1lbnRJRDtcclxuXHRcdFxyXG5cdFx0Ly9nZXQgdGhlIHF1ZXN0aW9uIGNvbnRlbnRzIGZyb20gdGhlIHBhcmVudCBzY29wZVxyXG5cdFx0dm0ucXVlc3Rpb24gPSAkc2NvcGUuJHBhcmVudC5jb250ZW50O1xyXG5cclxuXHRcdCRzY29wZS4kb24oJ1FVRVNUSU9OX0RFTEVURScsIGZ1bmN0aW9uKGV2ZW50LCBxdWVzdGlvbkluZGV4KXtcclxuXHRcdFx0aWYgKHZtLnF1ZXN0aW9uLnF1ZXN0aW9uSW5kZXggPiBxdWVzdGlvbkluZGV4KXtcclxuXHRcdFx0XHR2bS5xdWVzdGlvbi5xdWVzdGlvbkluZGV4LS07XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuZWRpdFF1ZXN0aW9uID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYgKCRzY29wZS5lZGl0Rm9ybS4kZGlydHkpe1xyXG5cdFx0XHRcdFF1ZXN0aW9uRmFjdG9yeS5lZGl0UXVlc3Rpb24odm0uY291cnNlQ29kZSwgdm0uYXNzaWdubWVudElELCB2bS5xdWVzdGlvbikudGhlbihcclxuXHRcdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdFx0JHNjb3BlLmVkaXRpbmcgPSBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHQpXHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdCRzY29wZS5lZGl0aW5nID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmFkZEZpbGxBbnN3ZXIgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR2bS5xdWVzdGlvbi5maWxsQW5zd2Vycy5wdXNoKCcnKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmRlbGV0ZUZpbGxBbnN3ZXIgPSBmdW5jdGlvbihpbmRleCl7XHJcblx0XHRcdHZtLnF1ZXN0aW9uLmZpbGxBbnN3ZXJzLnNwbGljZShpbmRleCwgMSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hZGRNQ09wdGlvbiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZtLnF1ZXN0aW9uLmFuc3dlck9wdGlvbnMucHVzaCgnJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5kZWxldGVNQ09wdGlvbiA9IGZ1bmN0aW9uKGluZGV4KXtcclxuXHRcdFx0dm0ucXVlc3Rpb24uYW5zd2VyT3B0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdFx0fVxyXG5cdH1dKVxyXG5cclxuXHQuY29udHJvbGxlcignRXhlcmNpc2VDb250cm9sbGVyJywgW1wiJHNjb3BlXCIsIFwiVXNlckluZm9cIiwgZnVuY3Rpb24oJHNjb3BlLCBVc2VySW5mbyl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cclxuXHRcdC8vZ2V0IHRoZSBleGVyY2lzZSBjb250ZW50cyBmcm9tIHRoZSBwYXJlbnQgc2NvcGVcclxuXHRcdHZtLmV4ZXJjaXNlID0gJHNjb3BlLiRwYXJlbnQuY29udGVudDtcclxuXHRcdFxyXG5cdFx0dGhpcy5sb2dRdWVzdGlvbiA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGNvbnNvbGUubG9nKHZtLmV4ZXJjaXNlKTtcclxuXHRcdH1cclxuXHR9XSlcclxuXHJcblx0LmNvbnRyb2xsZXIoJ0V4ZXJjaXNlRWRpdENvbnRyb2xsZXInLCBbXCIkc2NvcGVcIiwgXCIkc3RhdGVQYXJhbXNcIiwgXCJVc2VySW5mb1wiLCBcIlF1ZXN0aW9uRmFjdG9yeVwiLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgVXNlckluZm8sIFF1ZXN0aW9uRmFjdG9yeSl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uY291cnNlQ29kZSA9ICRzdGF0ZVBhcmFtcy5jb3Vyc2VDb2RlO1xyXG5cdFx0dm0uYXNzaWdubWVudElEID0gJHN0YXRlUGFyYW1zLmFzc2lnbm1lbnRJRDtcclxuXHRcdFxyXG5cdFx0JHNjb3BlLiRvbignRVhFUkNJU0VfREVMRVRFJywgZnVuY3Rpb24oZXZlbnQsIGV4ZXJjaXNlSW5kZXgpe1xyXG5cdFx0XHRpZiAodm0uZXhlcmNpc2UuZXhlcmNpc2VJbmRleCA+IGV4ZXJjaXNlSW5kZXgpe1xyXG5cdFx0XHRcdHZtLmV4ZXJjaXNlLmV4ZXJjaXNlSW5kZXgtLTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly9nZXQgdGhlIGV4ZXJjaXNlIGNvbnRlbnRzIGZyb20gdGhlIHBhcmVudCBzY29wZVxyXG5cdFx0dm0uZXhlcmNpc2UgPSAkc2NvcGUuJHBhcmVudC5jb250ZW50O1xyXG5cdH1dKVxyXG59KSgpO1xuKGZ1bmN0aW9uKCl7XHJcblx0YW5ndWxhci5tb2R1bGUoJ2Fzc2lnbm1lbnRzJylcclxuXHQuZGlyZWN0aXZlKCdxdWVzdGlvbicsIGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZXN0cmljdDogJ0UnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL2Fzc2lnbm1lbnRzL3BhcnRpYWxzL3F1ZXN0aW9uLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnUXVlc3Rpb25Db250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAncXVlc3Rpb25DdHJsJ1xyXG5cdFx0fVxyXG5cdH0pXHJcblx0LmRpcmVjdGl2ZSgncXVlc3Rpb25FZGl0JywgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlc3RyaWN0OiAnRScsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvYXNzaWdubWVudHMvcGFydGlhbHMvcXVlc3Rpb25FZGl0Lmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnUXVlc3Rpb25FZGl0Q29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3F1ZXN0aW9uRWRpdEN0cmwnXHJcblx0XHR9XHJcblx0fSlcclxuXHQuZGlyZWN0aXZlKCdleGVyY2lzZScsIGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZXN0cmljdDogJ0UnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL2Fzc2lnbm1lbnRzL3BhcnRpYWxzL2V4ZXJjaXNlLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnRXhlcmNpc2VDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAnZXhlcmNpc2VDdHJsJ1xyXG5cdFx0fVxyXG5cdH0pXHJcblx0LmRpcmVjdGl2ZSgnZXhlcmNpc2VFZGl0JywgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlc3RyaWN0OiAnRScsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvYXNzaWdubWVudHMvcGFydGlhbHMvZXhlcmNpc2VFZGl0Lmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnRXhlcmNpc2VFZGl0Q29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ2V4ZXJjaXNlRWRpdEN0cmwnXHJcblx0XHR9XHJcblx0fSlcclxufSkoKTtcbihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdhc3NpZ25tZW50cycpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpe1xyXG5cdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Jvb3QuYXNzaWdubWVudCcsIHtcclxuXHRcdFx0dXJsOiAnL2NvdXJzZS86Y291cnNlQ29kZS9hc3NpZ25tZW50Lzphc3NpZ25tZW50SUQnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL2Fzc2lnbm1lbnRzL3BhcnRpYWxzL2Fzc2lnbm1lbnQuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdBc3NpZ25tZW50Q29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ2Fzc2lnbm1lbnRDdHJsJ1xyXG5cdFx0fSk7XHJcblx0fV0pO1xyXG59KSgpO1xuKGZ1bmN0aW9uKCl7XHJcblx0YW5ndWxhci5tb2R1bGUoJ2Fzc2lnbm1lbnRzJykuZmFjdG9yeSgnQXNzaWdubWVudEZhY3RvcnknLCBbXCIkaHR0cFwiLCBmdW5jdGlvbigkaHR0cCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Y3JlYXRlQXNzaWdubWVudDogY3JlYXRlQXNzaWdubWVudCxcclxuXHRcdFx0Z2V0QXNzaWdubWVudDogZ2V0QXNzaWdubWVudFxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVBc3NpZ25tZW50KGNvdXJzZUNvZGUsIG5ld0Fzc2lnbm1lbnQpe1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb3Vyc2UvJyArIGNvdXJzZUNvZGUgKyAnL2Fzc2lnbm1lbnQvY3JlYXRlJywgbmV3QXNzaWdubWVudCkudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiBTdWNjZXNzKHJlcyl7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRBc3NpZ25tZW50KGNvdXJzZUNvZGUsIGFzc2lnbm1lbnRJRCl7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY291cnNlLycgKyBjb3Vyc2VDb2RlICsgJy9hc3NpZ25tZW50LycgKyBhc3NpZ25tZW50SUQpLnRoZW4oXHJcblx0XHRcdFx0ZnVuY3Rpb24gU3VjY2VzcyhyZXMpe1xyXG5cclxuXHRcdFx0XHRcdHZhciBhc3NpZ25tZW50ID0gcmVzLmRhdGE7XHJcblx0XHRcdFx0XHQvL2V4ZXJjaXNlIGluZGV4LCBxdWVzdGlvbiBpbmRleCwgZnJxIGluZGV4XHJcblx0XHRcdFx0XHR2YXIgZUkgPSAwLCBxSSA9IDAsIGZJID0gMDtcclxuXHJcblx0XHRcdFx0XHRhc3NpZ25tZW50LmNvbnRlbnQgPSBuZXcgQXJyYXkoYXNzaWdubWVudC5xdWVzdGlvbnMubGVuZ3RoICsgYXNzaWdubWVudC5leGVyY2lzZXMubGVuZ3RoKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGFzc2lnbm1lbnQpO1xyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhc3NpZ25tZW50LmNvbnRlbnRPcmRlci5sZW5ndGg7IGkrKyl7XHJcblx0XHRcdFx0XHRcdC8vdHJ1ZSA9IGV4ZXJjaXNlLCBmYWxzZSA9IHF1ZXN0aW9uXHJcblx0XHRcdFx0XHRcdGlmIChhc3NpZ25tZW50LmNvbnRlbnRPcmRlcltpXSA9PT0gJ2V4ZXJjaXNlJyl7XHJcblx0XHRcdFx0XHRcdFx0YXNzaWdubWVudC5jb250ZW50W2ldID0gYXNzaWdubWVudC5leGVyY2lzZXNbZUldO1xyXG5cdFx0XHRcdFx0XHRcdGFzc2lnbm1lbnQuY29udGVudFtpXS50eXBlID0gJ2V4ZXJjaXNlJztcclxuXHRcdFx0XHRcdFx0XHRhc3NpZ25tZW50LmNvbnRlbnRbaV0uZXhlcmNpc2VJbmRleCA9IGVJXHJcblx0XHRcdFx0XHRcdFx0ZUkrKztcclxuXHRcdFx0XHRcdFx0fWVsc2UgaWYgKGFzc2lnbm1lbnQuY29udGVudE9yZGVyW2ldID09PSAncXVlc3Rpb24nKXtcclxuXHRcdFx0XHRcdFx0XHRhc3NpZ25tZW50LmNvbnRlbnRbaV0gPSBhc3NpZ25tZW50LnF1ZXN0aW9uc1txSV07XHJcblx0XHRcdFx0XHRcdFx0YXNzaWdubWVudC5jb250ZW50W2ldLnR5cGUgPSAncXVlc3Rpb24nO1xyXG5cdFx0XHRcdFx0XHRcdGFzc2lnbm1lbnQuY29udGVudFtpXS5xdWVzdGlvbkluZGV4ID0gcUk7XHJcblx0XHRcdFx0XHRcdFx0cUkrKztcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKGFzc2lnbm1lbnQuY29udGVudFtpXS5xdWVzdGlvblR5cGUgPT09ICdmcnEnKXtcclxuXHRcdFx0XHRcdFx0XHRcdGFzc2lnbm1lbnQuY29udGVudFtpXS5mcnFJbmRleCA9IGZJO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZkkrK1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuIGFzc2lnbm1lbnQ7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRmdW5jdGlvbiBGYWlsdXJlKHJlcyl7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH07XHJcblx0fV0pXHJcblxyXG5cdC5mYWN0b3J5KCdRdWVzdGlvbkZhY3RvcnknLCBbXCIkaHR0cFwiLCBmdW5jdGlvbigkaHR0cCl7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0YWRkUXVlc3Rpb246IGFkZFF1ZXN0aW9uLFxyXG5cdFx0XHRlZGl0UXVlc3Rpb246IGVkaXRRdWVzdGlvbixcclxuXHRcdFx0ZGVsZXRlUXVlc3Rpb246IGRlbGV0ZVF1ZXN0aW9uXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGFkZFF1ZXN0aW9uKGNvdXJzZUNvZGUsIGFzc2lnbm1lbnRJRCl7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC8nICsgYXNzaWdubWVudElEICsgJy9xdWVzdGlvbi9jcmVhdGUnKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdHZhciBuZXdRdWVzdGlvbiA9IHJlcy5kYXRhO1xyXG5cdFx0XHRcdFx0bmV3UXVlc3Rpb24udHlwZSA9ICdxdWVzdGlvbic7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3UXVlc3Rpb247XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGVkaXRRdWVzdGlvbihjb3Vyc2VDb2RlLCBhc3NpZ25tZW50SUQsIHF1ZXN0aW9uKXtcclxuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9jb3Vyc2UvJyArIGNvdXJzZUNvZGUgKyAnL2Fzc2lnbm1lbnQvJyArIGFzc2lnbm1lbnRJRCArICcvcXVlc3Rpb24vZWRpdCcsIHF1ZXN0aW9uKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBkZWxldGVRdWVzdGlvbihjb3Vyc2VDb2RlLCBhc3NpZ25tZW50SUQsIHF1ZXN0aW9uSW5kZXgpe1xyXG5cdFx0XHR2YXIgcXVlc3Rpb24gPSB7IHF1ZXN0aW9uSW5kZXg6IHF1ZXN0aW9uSW5kZXggfTtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY291cnNlLycgKyBjb3Vyc2VDb2RlICsgJy9hc3NpZ25tZW50LycgKyBhc3NpZ25tZW50SUQgKyAnL3F1ZXN0aW9uL2RlbGV0ZScsIHF1ZXN0aW9uKTtcclxuXHRcdH1cclxuXHR9XSlcclxuXHJcblx0LmZhY3RvcnkoJ0V4ZXJjaXNlRmFjdG9yeScsIFtcIiRodHRwXCIsIGZ1bmN0aW9uKCRodHRwKXtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGFkZEV4ZXJjaXNlOiBhZGRFeGVyY2lzZSxcclxuXHRcdFx0ZGVsZXRlRXhlcmNpc2U6IGRlbGV0ZUV4ZXJjaXNlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGFkZEV4ZXJjaXNlKGNvdXJzZUNvZGUsIGFzc2lnbm1lbnRJRCl7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC8nICsgYXNzaWdubWVudElEICsgJy9leGVyY2lzZS9jcmVhdGUnKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdHZhciBuZXdFeGVyY2lzZSA9IHJlcy5kYXRhO1xyXG5cdFx0XHRcdFx0bmV3RXhlcmNpc2UudHlwZSA9ICdleGVyY2lzZSc7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3RXhlcmNpc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuLypcdFx0ZnVuY3Rpb24gZWRpdEV4ZXJjaXNlKGNvdXJzZUNvZGUsIGFzc2lnbm1lbnRJRCwgcXVlc3Rpb24pe1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC8nICsgYXNzaWdubWVudElEICsgJy9xdWVzdGlvbi9lZGl0JywgcXVlc3Rpb24pO1xyXG5cdFx0fSovXHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlRXhlcmNpc2UoY291cnNlQ29kZSwgYXNzaWdubWVudElELCBleGVyY2lzZUluZGV4KXtcclxuXHRcdFx0dmFyIGV4ZXJjaXNlID0geyBleGVyY2lzZUluZGV4OiBleGVyY2lzZUluZGV4IH07XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC8nICsgYXNzaWdubWVudElEICsgJy9leGVyY2lzZS9kZWxldGUnLCBleGVyY2lzZSk7XHJcblx0XHR9XHJcblx0fV0pXHJcbn0pKCk7XG4oZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBbXCIkc3RhdGVcIiwgXCIkaHR0cFwiLCBcIkNvdXJzZUZhY3RvcnlcIiwgXCJVc2VySW5mb1wiLCBmdW5jdGlvbigkc3RhdGUsICRodHRwLCBDb3Vyc2VGYWN0b3J5LCBVc2VySW5mbyl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dGhpcy5uZXdDb3Vyc2UgPSB7fTtcclxuXHRcdHRoaXMuY291cnNlcyA9IG51bGw7XHJcblx0XHR0aGlzLnVzZXIgPSBVc2VySW5mby5nZXRVc2VyKCk7XHJcblxyXG5cdFx0dmFyIGdldENvdXJzZXMgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRDb3Vyc2VGYWN0b3J5LmdldENvdXJzZXMoKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdHZtLmNvdXJzZXMgPSByZXMuZGF0YTtcclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0XHRmdW5jdGlvbiBGYWlsdXJlKHJlcyl7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5jcmVhdGVDb3Vyc2UgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRDb3Vyc2VGYWN0b3J5LmNyZWF0ZUNvdXJzZSh2bS5uZXdDb3Vyc2UpLnRoZW4oZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXMpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRnZXRDb3Vyc2VzKCk7XHJcblx0fV0pO1xyXG5cclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmNvbnRyb2xsZXIoJ0NvdXJzZUNvbnRyb2xsZXInLCBcclxuXHRcdFtcIiRzdGF0ZVwiLCBcIiRodHRwXCIsIFwiJHN0YXRlUGFyYW1zXCIsIFwiVXNlckluZm9cIiwgXCJDb3Vyc2VGYWN0b3J5XCIsIFwiQXNzaWdubWVudEZhY3RvcnlcIiwgZnVuY3Rpb24oJHN0YXRlLCAkaHR0cCwgJHN0YXRlUGFyYW1zLCBVc2VySW5mbywgQ291cnNlRmFjdG9yeSwgQXNzaWdubWVudEZhY3Rvcnkpe1xyXG5cclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdFx0dm0uY291cnNlID0gbnVsbDtcclxuXHRcdHZtLnVzZXIgPSBVc2VySW5mby5nZXRVc2VyKCk7XHJcblx0XHR2bS5uZXdBc3NpZ25tZW50ID0ge307XHJcblxyXG5cdFx0dmFyIGdldENvdXJzZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdENvdXJzZUZhY3RvcnkuZ2V0Q291cnNlKCRzdGF0ZVBhcmFtcy5jb3Vyc2VDb2RlKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdHZtLmNvdXJzZSA9IHJlcy5kYXRhO1xyXG5cdFx0XHRcdH0sIFxyXG5cdFx0XHRcdGZ1bmN0aW9uIEZhaWx1cmUocmVzKXtcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmNyZWF0ZUFzc2lnbm1lbnQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRBc3NpZ25tZW50RmFjdG9yeS5jcmVhdGVBc3NpZ25tZW50KCRzdGF0ZVBhcmFtcy5jb3Vyc2VDb2RlLCB2bS5uZXdBc3NpZ25tZW50KS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MoYXNzaWdubWVudCl7XHJcblx0XHRcdFx0XHR2bS5jb3Vyc2UuYXNzaWdubWVudHMucHVzaChhc3NpZ25tZW50KTtcclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0XHRmdW5jdGlvbiBGYWlsdXJlKHJlcyl7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRnZXRDb3Vyc2UoKTtcclxuXHR9XSk7XHJcbn0pKCk7XG4oZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpe1xyXG5cdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Jvb3QubWFpbi5kYXNoYm9hcmQnLCB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvY291cnNlcy9wYXJ0aWFscy9kYXNoYm9hcmQuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAnZGFzaGJvYXJkQ3RybCdcclxuXHRcdH0pO1xyXG5cclxuXHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdyb290LmNvdXJzZScsIHtcclxuXHRcdFx0dXJsOiAnL2NvdXJzZS86Y291cnNlQ29kZScsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvY291cnNlcy9wYXJ0aWFscy9jb3Vyc2UuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdDb3Vyc2VDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAnY291cnNlQ3RybCdcclxuXHRcdH0pO1xyXG5cdH1dKTtcclxufSkoKTtcbihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdjb3Vyc2VzJykuZmFjdG9yeSgnQ291cnNlRmFjdG9yeScsIFtcIiRodHRwXCIsIGZ1bmN0aW9uICgkaHR0cCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Y3JlYXRlQ291cnNlOiBjcmVhdGVDb3Vyc2UsXHJcblx0XHRcdGdldENvdXJzZTogZ2V0Q291cnNlLFxyXG5cdFx0XHRnZXRDb3Vyc2VzOiBnZXRDb3Vyc2VzXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gY3JlYXRlQ291cnNlKG5ld0NvdXJzZSkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb3Vyc2UvY3JlYXRlJywgbmV3Q291cnNlKTtcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0Q291cnNlKGNvdXJzZUNvZGUpe1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZ2V0Q291cnNlcygpe1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NvdXJzZScpO1xyXG5cdFx0fVxyXG5cdH1dKTtcclxufSkoKTtcbihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdnZW5lcmFsJykuY29udHJvbGxlcignTmF2Q29udHJvbGxlcicsIFtcIiRyb290U2NvcGVcIiwgXCIkc2NvcGVcIiwgXCIkaHR0cFwiLCBcIkF1dGhTZXJ2aWNlXCIsIFwiQXV0aFJlc29sdmVyXCIsIFwiJHN0YXRlXCIsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGh0dHAsIEF1dGhTZXJ2aWNlLCBBdXRoUmVzb2x2ZXIsICRzdGF0ZSl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uJHN0YXRlID0gJHN0YXRlO1xyXG5cdFx0dm0uYkxvZ2dlZEluID0gbnVsbDtcclxuXHRcdHZtLmhvbWVTdGF0ZSA9ICdyb290Lm1haW4uZGFzaGJvYXJkJztcclxuXHJcblx0XHRjb25zb2xlLmxvZygkcm9vdFNjb3BlKTtcclxuXHJcblx0XHR2YXIgY2hlY2tBdXRoID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0aWYgKEF1dGhSZXNvbHZlci5iSXNSZXNvbHZlZCgpKXtcclxuXHRcdFx0XHR2bS5iTG9nZ2VkSW4gPSBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0QXV0aFJlc29sdmVyLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHR2bS5iTG9nZ2VkSW4gPSBBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vV2hlbiB0aGUgdXNlciBsb2dzIGluLCBjaGFuZ2UgdG8gbG9nZ2VkIGluIG5hdiBiYXJcclxuXHRcdCRyb290U2NvcGUuJHdhdGNoKCdjdXJyZW50VXNlcicsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdGNoZWNrQXV0aCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly9HbyB0byBhIGRpZmZlcmVudCBzdGF0ZSBiYXNlZCBvbiBhdXRoIHN0YXR1c1xyXG5cdFx0JHNjb3BlLiR3YXRjaCgnbmF2Q3RybC5iTG9nZ2VkSW4nLCBmdW5jdGlvbihiTG9nZ2VkSW4pe1xyXG5cdFx0XHRpZiAoYkxvZ2dlZEluKXtcclxuXHRcdFx0XHR2bS5ob21lU3RhdGUgPSAncm9vdC5tYWluLmRhc2hib2FyZCc7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdHZtLmhvbWVTdGF0ZSA9ICdyb290Lm1haW4ucHVibGljJztcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y2hlY2tBdXRoKCk7XHJcblx0fV0pO1xyXG59KSgpO1xuKGZ1bmN0aW9uKCl7XHJcblx0YW5ndWxhci5tb2R1bGUoJ2dlbmVyYWwnKS5jb25maWcoW1wiJHN0YXRlUHJvdmlkZXJcIiwgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpe1xyXG5cclxuXHRcdCRzdGF0ZVByb3ZpZGVyXHJcblx0XHQuc3RhdGUoJ3Jvb3QnLCB7XHJcblx0XHRcdGFic3RyYWN0OiB0cnVlLFxyXG5cdFx0XHR0ZW1wbGF0ZTogJzx1aS12aWV3Lz4nLFxyXG5cdFx0XHRyZXNvbHZlOiB7XHJcblx0XHRcdFx0YXV0aDogW1wiQXV0aFJlc29sdmVyXCIsIGZ1bmN0aW9uIHJlc29sdmVBdXRoZW50aWNhdGlvbihBdXRoUmVzb2x2ZXIpIHsgXHJcblx0XHRcdFx0XHRyZXR1cm4gKEF1dGhSZXNvbHZlci5iSXNSZXNvbHZlZCgpID09PSB0cnVlIHx8IEF1dGhSZXNvbHZlci5yZXNvbHZlKCkpO1xyXG5cdFx0XHRcdH1dXHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblxyXG5cdFx0LnN0YXRlKCdyb290Lm1haW4nLCB7XHJcblx0XHRcdHVybDogJy8nLFxyXG5cdFx0XHR0ZW1wbGF0ZTogJzx1aS12aWV3Lz4nLFxyXG5cdFx0XHRkYXRhOiB7XHJcblx0XHRcdFx0YklzUHVibGljOiB0cnVlXHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbnRyb2xsZXI6IFtcIiRzdGF0ZVwiLCBcIkF1dGhTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRzdGF0ZSwgQXV0aFNlcnZpY2Upe1xyXG5cdFx0XHRcdGlmIChBdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKSl7XHJcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ3Jvb3QubWFpbi5kYXNoYm9hcmQnKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHRcdCRzdGF0ZS5nbygncm9vdC5tYWluLnB1YmxpYycpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fV1cclxuXHRcdH0pXHJcblxyXG5cdFx0LnN0YXRlKCdyb290Lm1haW4ucHVibGljJywge1xyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL2dlbmVyYWwvcGFydGlhbHMvaW5kZXguaHRtbCcsXHJcblx0XHRcdGRhdGE6IHtcclxuXHRcdFx0XHRiSXNQdWJsaWM6IHRydWVcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29udHJvbGxlcjogZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnSGl0IHB1YmxpYyBpbmRleCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XSk7XHJcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgY2xpY2tPdXRzaWRlLiRpbmplY3QgPSBbXCIkZG9jdW1lbnRcIiwgXCIkcGFyc2VcIiwgXCIkdGltZW91dFwiXTtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdtaXNjJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdjbGlja091dHNpZGUnLCBjbGlja091dHNpZGUpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNsaWNrT3V0c2lkZSgkZG9jdW1lbnQsICRwYXJzZSwgJHRpbWVvdXQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsIGVsZW0sIGF0dHIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoaScpO1xyXG4gICAgICAgICAgICAgICAgLy8gcG9zdHBvbmUgbGlua2luZyB0byBuZXh0IGRpZ2VzdCB0byBhbGxvdyBmb3IgdW5pcXVlIGlkIGdlbmVyYXRpb25cclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbGFzc0xpc3QgPSAoYXR0ci5vdXRzaWRlSWZOb3QgIT09IHVuZGVmaW5lZCkgPyBhdHRyLm91dHNpZGVJZk5vdC5yZXBsYWNlKCcsICcsICcsJykuc3BsaXQoJywnKSA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBlbGVtZW50cyBpZCBzbyBpdCBpcyBub3QgY291bnRlZCBpbiB0aGUgY2xpY2sgbGlzdGVuaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHIuaWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc0xpc3QucHVzaChhdHRyLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGV2ZW50SGFuZGxlcihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBvdXIgZWxlbWVudCBhbHJlYWR5IGhpZGRlbiBhbmQgYWJvcnQgaWYgc29cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuZWxlbWVudChlbGVtKS5oYXNDbGFzcyhcIm5nLWhpZGVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGNsaWNrIHRhcmdldCwgbm8gcG9pbnQgZ29pbmcgb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlIHx8ICFlLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGF2YWlsYWJsZSBlbGVtZW50cywgbG9va2luZyBmb3IgY2xhc3NlcyBpbiB0aGUgY2xhc3MgbGlzdCB0aGF0IG1pZ2h0IG1hdGNoIGFuZCBzbyB3aWxsIGVhdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGVsZW1lbnQgPSBlLnRhcmdldDsgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gZWxlbWVudC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWVzID0gZWxlbWVudC5jbGFzc05hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGNsYXNzTGlzdC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW53cmFwIFNWR0FuaW1hdGVkU3RyaW5nIGNsYXNzZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWVzICYmIGNsYXNzTmFtZXMuYmFzZVZhbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXMuYmFzZVZhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGVsZW1lbnRzIGlkJ3MgYW5kIGNsYXNzbmFtZXMgbG9va2luZyBmb3IgZXhjZXB0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBleGFjdCBtYXRjaGVzIG9uIGlkJ3Mgb3IgY2xhc3NlcywgYnV0IG9ubHkgaWYgdGhleSBleGlzdCBpbiB0aGUgZmlyc3QgcGxhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGlkICE9PSB1bmRlZmluZWQgJiYgaWQgPT09IGNsYXNzTGlzdFtpXSkgfHwgKGNsYXNzTmFtZXMgJiYgY2xhc3NOYW1lcyA9PT0gY2xhc3NMaXN0W2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3cgbGV0J3MgZXhpdCBvdXQgYXMgaXQgaXMgYW4gZWxlbWVudCB0aGF0IGhhcyBiZWVuIGRlZmluZWQgYXMgYmVpbmcgaWdub3JlZCBmb3IgY2xpY2tpbmcgb3V0c2lkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGdvdCB0aGlzIGZhciwgdGhlbiB3ZSBhcmUgZ29vZCB0byBnbyB3aXRoIHByb2Nlc3NpbmcgdGhlIGNvbW1hbmQgcGFzc2VkIGluIHZpYSB0aGUgY2xpY2stb3V0c2lkZSBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA9ICRwYXJzZShhdHRyWydjbGlja091dHNpZGUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oJHNjb3BlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZGV2aWNlcyBoYXMgYSB0b3VjaHNjcmVlbiwgbGlzdGVuIGZvciB0aGlzIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9oYXNUb3VjaCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vbigndG91Y2hzdGFydCcsIGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCBsaXN0ZW4gZm9yIHRoZSBjbGljayBldmVudCBldmVuIGlmIHRoZXJlIGlzIHRvdWNoIHRvIGNhdGVyIGZvciB0b3VjaHNjcmVlbiBsYXB0b3BzXHJcbiAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9uKCdjbGljaycsIGV2ZW50SGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIHNjb3BlIGlzIGRlc3Ryb3llZCwgY2xlYW4gdXAgdGhlIGRvY3VtZW50cyBldmVudCBoYW5kbGVycyBhcyB3ZSBkb24ndCB3YW50IGl0IGhhbmdpbmcgYXJvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9oYXNUb3VjaCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKCd0b3VjaHN0YXJ0JywgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9mZignY2xpY2snLCBldmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBwcml2YXRlIGZ1bmN0aW9uIHRvIGF0dGVtcHQgdG8gZmlndXJlIG91dCBpZiB3ZSBhcmUgb24gYSB0b3VjaCBkZXZpY2VcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfaGFzVG91Y2goKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdvcmtzIG9uIG1vc3QgYnJvd3NlcnMsIElFMTAvMTEgYW5kIFN1cmZhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTtcblxuKGZ1bmN0aW9uKCl7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3VzZXInKS5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBbXCIkc3RhdGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiQXV0aFNlcnZpY2VcIiwgZnVuY3Rpb24oJHN0YXRlLCAkcm9vdFNjb3BlLCBBdXRoU2VydmljZSl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0XHJcblx0XHR2bS5hdXRoTWVzc2FnZSA9ICcnO1xyXG5cdFx0dm0udXNlciA9IHtcclxuXHRcdFx0ZW1haWw6ICcnLFxyXG5cdFx0XHRwYXNzd29yZDogJydcclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5sb2dpbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRBdXRoU2VydmljZS5sb2dpbih2bS51c2VyKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uKHJlcyl7XHJcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ3Jvb3QubWFpbicpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0XHRcdHZtLmF1dGhNZXNzYWdlID0gcmVzLmRhdGEudXNlck1lc3NhZ2U7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cdH1dKVxyXG5cclxuXHQuY29udHJvbGxlcignTG9nb3V0Q29udHJvbGxlcicsIFtcIiRodHRwXCIsIFwiJHN0YXRlXCIsIFwiVXNlckluZm9cIiwgZnVuY3Rpb24oJGh0dHAsICRzdGF0ZSwgVXNlckluZm8pe1xyXG5cdFx0Ly9Mb2dvdXQgYW5kIHJlc2V0IHVzZXJcclxuXHRcdCRodHRwLnBvc3QoJy9hcGkvdXNlci9sb2dvdXQnKS50aGVuKFxyXG5cdFx0XHRmdW5jdGlvbiBTdWNjZXNzKCl7XHJcblx0XHRcdFx0VXNlckluZm8uZGVzdHJveVVzZXIoKTtcclxuXHRcdFx0XHQkc3RhdGUuZ28oJ3Jvb3QubWFpbi5wdWJsaWMnKTtcclxuXHRcdFx0fVxyXG5cdFx0KVxyXG5cdH1dKVxyXG5cdFxyXG5cdC5jb250cm9sbGVyKCdKb2luQ29udHJvbGxlcicsIFtcIiRzdGF0ZVwiLCBcIiRyb290U2NvcGVcIiwgXCJBdXRoU2VydmljZVwiLCBmdW5jdGlvbigkc3RhdGUsICRyb290U2NvcGUsIEF1dGhTZXJ2aWNlKXtcclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHR2bS5hdXRoTWVzc2FnZSA9ICcnO1xyXG5cdFx0dm0udXNlciA9IHtcclxuXHRcdFx0Zmlyc3ROYW1lOiAnJyxcclxuXHRcdFx0bGFzdE5hbWU6ICcnLFxyXG5cdFx0XHRyZXR5cGVQYXNzd29yZDogJycsIFxyXG5cdFx0XHRwYXNzd29yZDogJycsXHJcblx0XHRcdGVtYWlsOiAnJyxcclxuXHRcdFx0YWNjb3VudFR5cGU6ICcnXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuc2lnbnVwID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdEF1dGhTZXJ2aWNlLnNpZ251cCh2bS51c2VyKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uKHJlcyl7XHJcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ3Jvb3QubWFpbicpO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0XHRcdHZtLmF1dGhNZXNzYWdlID0gcmVzLmRhdGEudXNlck1lc3NhZ2U7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cdH1dKVxyXG5cclxuXHQuY29udHJvbGxlcignUHJvZmlsZUNvbnRyb2xsZXInLCBbXCIkc3RhdGVcIiwgXCJVc2VySW5mb1wiLCBmdW5jdGlvbigkc3RhdGUsIFVzZXJJbmZvKXtcclxuXHRcdHRoaXMudXNlciA9IFVzZXJJbmZvLmdldFVzZXIoKTtcclxuXHR9XSk7XHJcbn0pKCk7XG4oZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpe1xyXG5cdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Jvb3QubG9naW4nLCB7XHJcblx0XHRcdHVybDogJy9sb2dpbicsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvdXNlci9wYXJ0aWFscy9sb2dpbi5odG1sJyxcclxuXHRcdFx0ZGF0YToge1xyXG5cdFx0XHRcdGJJc1B1YmxpYzogdHJ1ZVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAnbG9naW5DdHJsJ1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Jvb3QubG9nb3V0Jywge1xyXG5cdFx0XHR1cmw6ICcvbG9nb3V0JyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ0xvZ291dENvbnRyb2xsZXInXHJcblx0XHR9KTtcclxuXHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgncm9vdC5qb2luJywge1xyXG5cdFx0XHR1cmw6ICcvam9pbicsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvdXNlci9wYXJ0aWFscy9qb2luLmh0bWwnLFxyXG5cdFx0XHRkYXRhOiB7XHJcblx0XHRcdFx0YklzUHVibGljOiB0cnVlXHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdKb2luQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ2pvaW5DdHJsJyxcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgncm9vdC5wcm9maWxlJywge1xyXG5cdFx0XHR1cmw6ICcvcHJvZmlsZScsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvdXNlci9wYXJ0aWFscy9wcm9maWxlLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnUHJvZmlsZUNvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICdwcm9maWxlQ3RybCdcclxuXHRcdH0pO1xyXG5cclxuXHR9XSk7XHJcbn0pKCk7XG4oZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmZhY3RvcnkoJ0F1dGhTZXJ2aWNlJywgW1wiJGh0dHBcIiwgXCJVc2VySW5mb1wiLCBmdW5jdGlvbiAoJGh0dHAsIFVzZXJJbmZvKSB7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bG9naW46IGxvZ2luLFxyXG5cdFx0XHRzaWdudXA6IHNpZ251cCxcclxuXHRcdFx0aXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXHJcblx0XHRcdHJldHJpZXZlUHJvZmlsZTogcmV0cmlldmVQcm9maWxlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKGNyZWRlbnRpYWxzKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cFxyXG5cdFx0XHQucG9zdCgnL2F1dGgvbG9jYWwnLCBjcmVkZW50aWFscylcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG5cdFx0XHRcdFVzZXJJbmZvLnNldFVzZXIocmVzLmRhdGEpO1xyXG5cdFx0XHRcdHJldHVybiByZXMuZGF0YTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHNpZ251cChuZXdVc2VyKXtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlci9qb2luJywgbmV3VXNlcikudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbihyZXMpe1xyXG5cdFx0XHRcdFx0VXNlckluZm8uc2V0VXNlcihyZXMuZGF0YSk7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRmdW5jdGlvbihyZXMpe1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmV0cmlldmVQcm9maWxlKCl7XHJcblx0XHRcdCRodHRwLmdldCgnL2FwaS91c2VyJykudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiBTdWNjZXNzKHJlcyl7XHJcblx0XHRcdFx0XHRVc2VySW5mby5zZXRVc2VyKHJlcy5kYXRhKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGZ1bmN0aW9uIEZhaWx1cmUocmVzKXtcclxuXHRcdFx0XHRcdFVzZXJJbmZvLnNldFVzZXIoe30pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKXtcclxuXHRcdFx0cmV0dXJuIFVzZXJJbmZvLmxpdmUoKTtcclxuXHRcdH07XHJcblx0fV0pO1xyXG5cclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmZhY3RvcnkoJ1VzZXJJbmZvJywgW1wiJHJvb3RTY29wZVwiLCBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bGl2ZTogbGl2ZSxcclxuXHRcdFx0c2V0VXNlcjogc2V0VXNlcixcclxuXHRcdFx0Z2V0VXNlcjogZ2V0VXNlcixcclxuXHRcdFx0ZGVzdHJveVVzZXI6IGRlc3Ryb3lVc2VyXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGl2ZSgpe1xyXG5cdFx0XHRyZXR1cm4gKE9iamVjdC5rZXlzKCRyb290U2NvcGUuY3VycmVudFVzZXIpLmxlbmd0aCA+IDApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNldFVzZXIodXNlcil7XHJcblx0XHRcdCRyb290U2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRVc2VyKCl7XHJcblx0XHRcdHJldHVybiAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGRlc3Ryb3lVc2VyKCl7XHJcblx0XHRcdCRyb290U2NvcGUuY3VycmVudFVzZXIgPSB7fTtcclxuXHRcdH07XHJcblx0fV0pO1xyXG5cclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmZhY3RvcnkoJ0F1dGhSZXNvbHZlcicsIFtcIiRxXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRzdGF0ZVwiLCBmdW5jdGlvbigkcSwgJHJvb3RTY29wZSwgJHN0YXRlKSB7XHJcblx0XHR2YXIgYklzUmVzb2x2ZWQgPSBmYWxzZTtcclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZXNvbHZlOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHRcdFx0XHR2YXIgdW53YXRjaCA9ICRyb290U2NvcGUuJHdhdGNoKCdjdXJyZW50VXNlcicsIGZ1bmN0aW9uIChjdXJyZW50VXNlcikge1xyXG5cdFx0XHRcdFx0aWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGN1cnJlbnRVc2VyKSkge1xyXG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudFVzZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKGN1cnJlbnRVc2VyKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRiSXNSZXNvbHZlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdHVud2F0Y2goKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGJJc1Jlc29sdmVkOiBmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHJldHVybiBiSXNSZXNvbHZlZDtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcblx0YW5ndWxhci5tb2R1bGUoJ2Fzc2lnbm1lbnRzJylcclxuXHQuZGlyZWN0aXZlKCdxdWVzdGlvbicsIGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZXN0cmljdDogJ0UnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL2Fzc2lnbm1lbnRzL3BhcnRpYWxzL3F1ZXN0aW9uLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnUXVlc3Rpb25Db250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAncXVlc3Rpb25DdHJsJ1xyXG5cdFx0fVxyXG5cdH0pXHJcblx0LmRpcmVjdGl2ZSgncXVlc3Rpb25FZGl0JywgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlc3RyaWN0OiAnRScsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvYXNzaWdubWVudHMvcGFydGlhbHMvcXVlc3Rpb25FZGl0Lmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnUXVlc3Rpb25FZGl0Q29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ3F1ZXN0aW9uRWRpdEN0cmwnXHJcblx0XHR9XHJcblx0fSlcclxuXHQuZGlyZWN0aXZlKCdleGVyY2lzZScsIGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZXN0cmljdDogJ0UnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL2Fzc2lnbm1lbnRzL3BhcnRpYWxzL2V4ZXJjaXNlLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnRXhlcmNpc2VDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAnZXhlcmNpc2VDdHJsJ1xyXG5cdFx0fVxyXG5cdH0pXHJcblx0LmRpcmVjdGl2ZSgnZXhlcmNpc2VFZGl0JywgZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHJlc3RyaWN0OiAnRScsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvYXNzaWdubWVudHMvcGFydGlhbHMvZXhlcmNpc2VFZGl0Lmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnRXhlcmNpc2VFZGl0Q29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ2V4ZXJjaXNlRWRpdEN0cmwnXHJcblx0XHR9XHJcblx0fSlcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgnYXNzaWdubWVudHMnKS5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyKXtcclxuXHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdyb290LmFzc2lnbm1lbnQnLCB7XHJcblx0XHRcdHVybDogJy9jb3Vyc2UvOmNvdXJzZUNvZGUvYXNzaWdubWVudC86YXNzaWdubWVudElEJyxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICcvYW5ndWxhci9hc3NpZ25tZW50cy9wYXJ0aWFscy9hc3NpZ25tZW50Lmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnQXNzaWdubWVudENvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICdhc3NpZ25tZW50Q3RybCdcclxuXHRcdH0pO1xyXG5cdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgnYXNzaWdubWVudHMnKS5mYWN0b3J5KCdBc3NpZ25tZW50RmFjdG9yeScsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRjcmVhdGVBc3NpZ25tZW50OiBjcmVhdGVBc3NpZ25tZW50LFxyXG5cdFx0XHRnZXRBc3NpZ25tZW50OiBnZXRBc3NpZ25tZW50XHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZUFzc2lnbm1lbnQoY291cnNlQ29kZSwgbmV3QXNzaWdubWVudCl7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC9jcmVhdGUnLCBuZXdBc3NpZ25tZW50KS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdHJldHVybiByZXMuZGF0YTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGdldEFzc2lnbm1lbnQoY291cnNlQ29kZSwgYXNzaWdubWVudElEKXtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jb3Vyc2UvJyArIGNvdXJzZUNvZGUgKyAnL2Fzc2lnbm1lbnQvJyArIGFzc2lnbm1lbnRJRCkudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiBTdWNjZXNzKHJlcyl7XHJcblxyXG5cdFx0XHRcdFx0dmFyIGFzc2lnbm1lbnQgPSByZXMuZGF0YTtcclxuXHRcdFx0XHRcdC8vZXhlcmNpc2UgaW5kZXgsIHF1ZXN0aW9uIGluZGV4LCBmcnEgaW5kZXhcclxuXHRcdFx0XHRcdHZhciBlSSA9IDAsIHFJID0gMCwgZkkgPSAwO1xyXG5cclxuXHRcdFx0XHRcdGFzc2lnbm1lbnQuY29udGVudCA9IG5ldyBBcnJheShhc3NpZ25tZW50LnF1ZXN0aW9ucy5sZW5ndGggKyBhc3NpZ25tZW50LmV4ZXJjaXNlcy5sZW5ndGgpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYXNzaWdubWVudCk7XHJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFzc2lnbm1lbnQuY29udGVudE9yZGVyLmxlbmd0aDsgaSsrKXtcclxuXHRcdFx0XHRcdFx0Ly90cnVlID0gZXhlcmNpc2UsIGZhbHNlID0gcXVlc3Rpb25cclxuXHRcdFx0XHRcdFx0aWYgKGFzc2lnbm1lbnQuY29udGVudE9yZGVyW2ldID09PSAnZXhlcmNpc2UnKXtcclxuXHRcdFx0XHRcdFx0XHRhc3NpZ25tZW50LmNvbnRlbnRbaV0gPSBhc3NpZ25tZW50LmV4ZXJjaXNlc1tlSV07XHJcblx0XHRcdFx0XHRcdFx0YXNzaWdubWVudC5jb250ZW50W2ldLnR5cGUgPSAnZXhlcmNpc2UnO1xyXG5cdFx0XHRcdFx0XHRcdGFzc2lnbm1lbnQuY29udGVudFtpXS5leGVyY2lzZUluZGV4ID0gZUlcclxuXHRcdFx0XHRcdFx0XHRlSSsrO1xyXG5cdFx0XHRcdFx0XHR9ZWxzZSBpZiAoYXNzaWdubWVudC5jb250ZW50T3JkZXJbaV0gPT09ICdxdWVzdGlvbicpe1xyXG5cdFx0XHRcdFx0XHRcdGFzc2lnbm1lbnQuY29udGVudFtpXSA9IGFzc2lnbm1lbnQucXVlc3Rpb25zW3FJXTtcclxuXHRcdFx0XHRcdFx0XHRhc3NpZ25tZW50LmNvbnRlbnRbaV0udHlwZSA9ICdxdWVzdGlvbic7XHJcblx0XHRcdFx0XHRcdFx0YXNzaWdubWVudC5jb250ZW50W2ldLnF1ZXN0aW9uSW5kZXggPSBxSTtcclxuXHRcdFx0XHRcdFx0XHRxSSsrO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoYXNzaWdubWVudC5jb250ZW50W2ldLnF1ZXN0aW9uVHlwZSA9PT0gJ2ZycScpe1xyXG5cdFx0XHRcdFx0XHRcdFx0YXNzaWdubWVudC5jb250ZW50W2ldLmZycUluZGV4ID0gZkk7XHJcblx0XHRcdFx0XHRcdFx0XHRmSSsrXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gYXNzaWdubWVudDtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGZ1bmN0aW9uIEZhaWx1cmUocmVzKXtcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fTtcclxuXHR9KVxyXG5cclxuXHQuZmFjdG9yeSgnUXVlc3Rpb25GYWN0b3J5JywgZnVuY3Rpb24oJGh0dHApe1xyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGFkZFF1ZXN0aW9uOiBhZGRRdWVzdGlvbixcclxuXHRcdFx0ZWRpdFF1ZXN0aW9uOiBlZGl0UXVlc3Rpb24sXHJcblx0XHRcdGRlbGV0ZVF1ZXN0aW9uOiBkZWxldGVRdWVzdGlvblxyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBhZGRRdWVzdGlvbihjb3Vyc2VDb2RlLCBhc3NpZ25tZW50SUQpe1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jb3Vyc2UvJyArIGNvdXJzZUNvZGUgKyAnL2Fzc2lnbm1lbnQvJyArIGFzc2lnbm1lbnRJRCArICcvcXVlc3Rpb24vY3JlYXRlJykudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiBTdWNjZXNzKHJlcyl7XHJcblx0XHRcdFx0XHR2YXIgbmV3UXVlc3Rpb24gPSByZXMuZGF0YTtcclxuXHRcdFx0XHRcdG5ld1F1ZXN0aW9uLnR5cGUgPSAncXVlc3Rpb24nO1xyXG5cdFx0XHRcdFx0cmV0dXJuIG5ld1F1ZXN0aW9uO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBlZGl0UXVlc3Rpb24oY291cnNlQ29kZSwgYXNzaWdubWVudElELCBxdWVzdGlvbil7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvY291cnNlLycgKyBjb3Vyc2VDb2RlICsgJy9hc3NpZ25tZW50LycgKyBhc3NpZ25tZW50SUQgKyAnL3F1ZXN0aW9uL2VkaXQnLCBxdWVzdGlvbik7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlUXVlc3Rpb24oY291cnNlQ29kZSwgYXNzaWdubWVudElELCBxdWVzdGlvbkluZGV4KXtcclxuXHRcdFx0dmFyIHF1ZXN0aW9uID0geyBxdWVzdGlvbkluZGV4OiBxdWVzdGlvbkluZGV4IH07XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC8nICsgYXNzaWdubWVudElEICsgJy9xdWVzdGlvbi9kZWxldGUnLCBxdWVzdGlvbik7XHJcblx0XHR9XHJcblx0fSlcclxuXHJcblx0LmZhY3RvcnkoJ0V4ZXJjaXNlRmFjdG9yeScsIGZ1bmN0aW9uKCRodHRwKXtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGFkZEV4ZXJjaXNlOiBhZGRFeGVyY2lzZSxcclxuXHRcdFx0ZGVsZXRlRXhlcmNpc2U6IGRlbGV0ZUV4ZXJjaXNlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGFkZEV4ZXJjaXNlKGNvdXJzZUNvZGUsIGFzc2lnbm1lbnRJRCl7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC8nICsgYXNzaWdubWVudElEICsgJy9leGVyY2lzZS9jcmVhdGUnKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdHZhciBuZXdFeGVyY2lzZSA9IHJlcy5kYXRhO1xyXG5cdFx0XHRcdFx0bmV3RXhlcmNpc2UudHlwZSA9ICdleGVyY2lzZSc7XHJcblx0XHRcdFx0XHRyZXR1cm4gbmV3RXhlcmNpc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuLypcdFx0ZnVuY3Rpb24gZWRpdEV4ZXJjaXNlKGNvdXJzZUNvZGUsIGFzc2lnbm1lbnRJRCwgcXVlc3Rpb24pe1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC8nICsgYXNzaWdubWVudElEICsgJy9xdWVzdGlvbi9lZGl0JywgcXVlc3Rpb24pO1xyXG5cdFx0fSovXHJcblxyXG5cdFx0ZnVuY3Rpb24gZGVsZXRlRXhlcmNpc2UoY291cnNlQ29kZSwgYXNzaWdubWVudElELCBleGVyY2lzZUluZGV4KXtcclxuXHRcdFx0dmFyIGV4ZXJjaXNlID0geyBleGVyY2lzZUluZGV4OiBleGVyY2lzZUluZGV4IH07XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2NvdXJzZS8nICsgY291cnNlQ29kZSArICcvYXNzaWdubWVudC8nICsgYXNzaWdubWVudElEICsgJy9leGVyY2lzZS9kZWxldGUnLCBleGVyY2lzZSk7XHJcblx0XHR9XHJcblx0fSlcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBmdW5jdGlvbigkc3RhdGUsICRodHRwLCBDb3Vyc2VGYWN0b3J5LCBVc2VySW5mbyl7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dGhpcy5uZXdDb3Vyc2UgPSB7fTtcclxuXHRcdHRoaXMuY291cnNlcyA9IG51bGw7XHJcblx0XHR0aGlzLnVzZXIgPSBVc2VySW5mby5nZXRVc2VyKCk7XHJcblxyXG5cdFx0dmFyIGdldENvdXJzZXMgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRDb3Vyc2VGYWN0b3J5LmdldENvdXJzZXMoKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdHZtLmNvdXJzZXMgPSByZXMuZGF0YTtcclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0XHRmdW5jdGlvbiBGYWlsdXJlKHJlcyl7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5jcmVhdGVDb3Vyc2UgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRDb3Vyc2VGYWN0b3J5LmNyZWF0ZUNvdXJzZSh2bS5uZXdDb3Vyc2UpLnRoZW4oZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXMpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRnZXRDb3Vyc2VzKCk7XHJcblx0fSk7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCd1c2VyJykuY29udHJvbGxlcignQ291cnNlQ29udHJvbGxlcicsIFxyXG5cdFx0ZnVuY3Rpb24oJHN0YXRlLCAkaHR0cCwgJHN0YXRlUGFyYW1zLCBVc2VySW5mbywgQ291cnNlRmFjdG9yeSwgQXNzaWdubWVudEZhY3Rvcnkpe1xyXG5cclxuXHRcdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdFx0dm0uY291cnNlID0gbnVsbDtcclxuXHRcdHZtLnVzZXIgPSBVc2VySW5mby5nZXRVc2VyKCk7XHJcblx0XHR2bS5uZXdBc3NpZ25tZW50ID0ge307XHJcblxyXG5cdFx0dmFyIGdldENvdXJzZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdENvdXJzZUZhY3RvcnkuZ2V0Q291cnNlKCRzdGF0ZVBhcmFtcy5jb3Vyc2VDb2RlKS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MocmVzKXtcclxuXHRcdFx0XHRcdHZtLmNvdXJzZSA9IHJlcy5kYXRhO1xyXG5cdFx0XHRcdH0sIFxyXG5cdFx0XHRcdGZ1bmN0aW9uIEZhaWx1cmUocmVzKXtcclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmNyZWF0ZUFzc2lnbm1lbnQgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHRBc3NpZ25tZW50RmFjdG9yeS5jcmVhdGVBc3NpZ25tZW50KCRzdGF0ZVBhcmFtcy5jb3Vyc2VDb2RlLCB2bS5uZXdBc3NpZ25tZW50KS50aGVuKFxyXG5cdFx0XHRcdGZ1bmN0aW9uIFN1Y2Nlc3MoYXNzaWdubWVudCl7XHJcblx0XHRcdFx0XHR2bS5jb3Vyc2UuYXNzaWdubWVudHMucHVzaChhc3NpZ25tZW50KTtcclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0XHRmdW5jdGlvbiBGYWlsdXJlKHJlcyl7XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRnZXRDb3Vyc2UoKTtcclxuXHR9KTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIpe1xyXG5cdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Jvb3QubWFpbi5kYXNoYm9hcmQnLCB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvY291cnNlcy9wYXJ0aWFscy9kYXNoYm9hcmQuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAnZGFzaGJvYXJkQ3RybCdcclxuXHRcdH0pO1xyXG5cclxuXHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdyb290LmNvdXJzZScsIHtcclxuXHRcdFx0dXJsOiAnL2NvdXJzZS86Y291cnNlQ29kZScsXHJcblx0XHRcdHRlbXBsYXRlVXJsOiAnL2FuZ3VsYXIvY291cnNlcy9wYXJ0aWFscy9jb3Vyc2UuaHRtbCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdDb3Vyc2VDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAnY291cnNlQ3RybCdcclxuXHRcdH0pO1xyXG5cdH1dKTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgnY291cnNlcycpLmZhY3RvcnkoJ0NvdXJzZUZhY3RvcnknLCBmdW5jdGlvbiAoJGh0dHApIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGNyZWF0ZUNvdXJzZTogY3JlYXRlQ291cnNlLFxyXG5cdFx0XHRnZXRDb3Vyc2U6IGdldENvdXJzZSxcclxuXHRcdFx0Z2V0Q291cnNlczogZ2V0Q291cnNlc1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZUNvdXJzZShuZXdDb3Vyc2UpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY291cnNlL2NyZWF0ZScsIG5ld0NvdXJzZSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGdldENvdXJzZShjb3Vyc2VDb2RlKXtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jb3Vyc2UvJyArIGNvdXJzZUNvZGUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGdldENvdXJzZXMoKXtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jb3Vyc2UnKTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgnZ2VuZXJhbCcpLmNvbnRyb2xsZXIoJ05hdkNvbnRyb2xsZXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRodHRwLCBBdXRoU2VydmljZSwgQXV0aFJlc29sdmVyLCAkc3RhdGUpe1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLiRzdGF0ZSA9ICRzdGF0ZTtcclxuXHRcdHZtLmJMb2dnZWRJbiA9IG51bGw7XHJcblx0XHR2bS5ob21lU3RhdGUgPSAncm9vdC5tYWluLmRhc2hib2FyZCc7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coJHJvb3RTY29wZSk7XHJcblxyXG5cdFx0dmFyIGNoZWNrQXV0aCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdGlmIChBdXRoUmVzb2x2ZXIuYklzUmVzb2x2ZWQoKSl7XHJcblx0XHRcdFx0dm0uYkxvZ2dlZEluID0gQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCk7XHJcblx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdEF1dGhSZXNvbHZlci5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0dm0uYkxvZ2dlZEluID0gQXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvL1doZW4gdGhlIHVzZXIgbG9ncyBpbiwgY2hhbmdlIHRvIGxvZ2dlZCBpbiBuYXYgYmFyXHJcblx0XHQkcm9vdFNjb3BlLiR3YXRjaCgnY3VycmVudFVzZXInLCBmdW5jdGlvbigpe1xyXG5cdFx0XHRjaGVja0F1dGgoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vR28gdG8gYSBkaWZmZXJlbnQgc3RhdGUgYmFzZWQgb24gYXV0aCBzdGF0dXNcclxuXHRcdCRzY29wZS4kd2F0Y2goJ25hdkN0cmwuYkxvZ2dlZEluJywgZnVuY3Rpb24oYkxvZ2dlZEluKXtcclxuXHRcdFx0aWYgKGJMb2dnZWRJbil7XHJcblx0XHRcdFx0dm0uaG9tZVN0YXRlID0gJ3Jvb3QubWFpbi5kYXNoYm9hcmQnO1xyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR2bS5ob21lU3RhdGUgPSAncm9vdC5tYWluLnB1YmxpYyc7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGNoZWNrQXV0aCgpO1xyXG5cdH0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCdnZW5lcmFsJykuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyKXtcclxuXHJcblx0XHQkc3RhdGVQcm92aWRlclxyXG5cdFx0LnN0YXRlKCdyb290Jywge1xyXG5cdFx0XHRhYnN0cmFjdDogdHJ1ZSxcclxuXHRcdFx0dGVtcGxhdGU6ICc8dWktdmlldy8+JyxcclxuXHRcdFx0cmVzb2x2ZToge1xyXG5cdFx0XHRcdGF1dGg6IGZ1bmN0aW9uIHJlc29sdmVBdXRoZW50aWNhdGlvbihBdXRoUmVzb2x2ZXIpIHsgXHJcblx0XHRcdFx0XHRyZXR1cm4gKEF1dGhSZXNvbHZlci5iSXNSZXNvbHZlZCgpID09PSB0cnVlIHx8IEF1dGhSZXNvbHZlci5yZXNvbHZlKCkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHJcblx0XHQuc3RhdGUoJ3Jvb3QubWFpbicsIHtcclxuXHRcdFx0dXJsOiAnLycsXHJcblx0XHRcdHRlbXBsYXRlOiAnPHVpLXZpZXcvPicsXHJcblx0XHRcdGRhdGE6IHtcclxuXHRcdFx0XHRiSXNQdWJsaWM6IHRydWVcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29udHJvbGxlcjogZnVuY3Rpb24oJHN0YXRlLCBBdXRoU2VydmljZSl7XHJcblx0XHRcdFx0aWYgKEF1dGhTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpKXtcclxuXHRcdFx0XHRcdCRzdGF0ZS5nbygncm9vdC5tYWluLmRhc2hib2FyZCcpO1xyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0JHN0YXRlLmdvKCdyb290Lm1haW4ucHVibGljJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cclxuXHRcdC5zdGF0ZSgncm9vdC5tYWluLnB1YmxpYycsIHtcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICcvYW5ndWxhci9nZW5lcmFsL3BhcnRpYWxzL2luZGV4Lmh0bWwnLFxyXG5cdFx0XHRkYXRhOiB7XHJcblx0XHRcdFx0YklzUHVibGljOiB0cnVlXHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ0hpdCBwdWJsaWMgaW5kZXgnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdtaXNjJylcclxuICAgICAgICAuZGlyZWN0aXZlKCdjbGlja091dHNpZGUnLCBjbGlja091dHNpZGUpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNsaWNrT3V0c2lkZSgkZG9jdW1lbnQsICRwYXJzZSwgJHRpbWVvdXQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsIGVsZW0sIGF0dHIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoaScpO1xyXG4gICAgICAgICAgICAgICAgLy8gcG9zdHBvbmUgbGlua2luZyB0byBuZXh0IGRpZ2VzdCB0byBhbGxvdyBmb3IgdW5pcXVlIGlkIGdlbmVyYXRpb25cclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbGFzc0xpc3QgPSAoYXR0ci5vdXRzaWRlSWZOb3QgIT09IHVuZGVmaW5lZCkgPyBhdHRyLm91dHNpZGVJZk5vdC5yZXBsYWNlKCcsICcsICcsJykuc3BsaXQoJywnKSA6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBlbGVtZW50cyBpZCBzbyBpdCBpcyBub3QgY291bnRlZCBpbiB0aGUgY2xpY2sgbGlzdGVuaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHIuaWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc0xpc3QucHVzaChhdHRyLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGV2ZW50SGFuZGxlcihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBvdXIgZWxlbWVudCBhbHJlYWR5IGhpZGRlbiBhbmQgYWJvcnQgaWYgc29cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuZWxlbWVudChlbGVtKS5oYXNDbGFzcyhcIm5nLWhpZGVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGNsaWNrIHRhcmdldCwgbm8gcG9pbnQgZ29pbmcgb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlIHx8ICFlLnRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGF2YWlsYWJsZSBlbGVtZW50cywgbG9va2luZyBmb3IgY2xhc3NlcyBpbiB0aGUgY2xhc3MgbGlzdCB0aGF0IG1pZ2h0IG1hdGNoIGFuZCBzbyB3aWxsIGVhdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGVsZW1lbnQgPSBlLnRhcmdldDsgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gZWxlbWVudC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWVzID0gZWxlbWVudC5jbGFzc05hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGNsYXNzTGlzdC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW53cmFwIFNWR0FuaW1hdGVkU3RyaW5nIGNsYXNzZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWVzICYmIGNsYXNzTmFtZXMuYmFzZVZhbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXMuYmFzZVZhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggdGhlIGVsZW1lbnRzIGlkJ3MgYW5kIGNsYXNzbmFtZXMgbG9va2luZyBmb3IgZXhjZXB0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBleGFjdCBtYXRjaGVzIG9uIGlkJ3Mgb3IgY2xhc3NlcywgYnV0IG9ubHkgaWYgdGhleSBleGlzdCBpbiB0aGUgZmlyc3QgcGxhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGlkICE9PSB1bmRlZmluZWQgJiYgaWQgPT09IGNsYXNzTGlzdFtpXSkgfHwgKGNsYXNzTmFtZXMgJiYgY2xhc3NOYW1lcyA9PT0gY2xhc3NMaXN0W2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3cgbGV0J3MgZXhpdCBvdXQgYXMgaXQgaXMgYW4gZWxlbWVudCB0aGF0IGhhcyBiZWVuIGRlZmluZWQgYXMgYmVpbmcgaWdub3JlZCBmb3IgY2xpY2tpbmcgb3V0c2lkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGdvdCB0aGlzIGZhciwgdGhlbiB3ZSBhcmUgZ29vZCB0byBnbyB3aXRoIHByb2Nlc3NpbmcgdGhlIGNvbW1hbmQgcGFzc2VkIGluIHZpYSB0aGUgY2xpY2stb3V0c2lkZSBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA9ICRwYXJzZShhdHRyWydjbGlja091dHNpZGUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oJHNjb3BlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZGV2aWNlcyBoYXMgYSB0b3VjaHNjcmVlbiwgbGlzdGVuIGZvciB0aGlzIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9oYXNUb3VjaCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vbigndG91Y2hzdGFydCcsIGV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCBsaXN0ZW4gZm9yIHRoZSBjbGljayBldmVudCBldmVuIGlmIHRoZXJlIGlzIHRvdWNoIHRvIGNhdGVyIGZvciB0b3VjaHNjcmVlbiBsYXB0b3BzXHJcbiAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9uKCdjbGljaycsIGV2ZW50SGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIHNjb3BlIGlzIGRlc3Ryb3llZCwgY2xlYW4gdXAgdGhlIGRvY3VtZW50cyBldmVudCBoYW5kbGVycyBhcyB3ZSBkb24ndCB3YW50IGl0IGhhbmdpbmcgYXJvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9oYXNUb3VjaCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKCd0b3VjaHN0YXJ0JywgZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9mZignY2xpY2snLCBldmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBwcml2YXRlIGZ1bmN0aW9uIHRvIGF0dGVtcHQgdG8gZmlndXJlIG91dCBpZiB3ZSBhcmUgb24gYSB0b3VjaCBkZXZpY2VcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBfaGFzVG91Y2goKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdvcmtzIG9uIG1vc3QgYnJvd3NlcnMsIElFMTAvMTEgYW5kIFN1cmZhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuXHRhbmd1bGFyLm1vZHVsZSgndXNlcicpLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzdGF0ZSwgJHJvb3RTY29wZSwgQXV0aFNlcnZpY2Upe1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdFxyXG5cdFx0dm0uYXV0aE1lc3NhZ2UgPSAnJztcclxuXHRcdHZtLnVzZXIgPSB7XHJcblx0XHRcdGVtYWlsOiAnJyxcclxuXHRcdFx0cGFzc3dvcmQ6ICcnXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMubG9naW4gPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0QXV0aFNlcnZpY2UubG9naW4odm0udXNlcikudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbihyZXMpe1xyXG5cdFx0XHRcdFx0JHN0YXRlLmdvKCdyb290Lm1haW4nKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGZ1bmN0aW9uKHJlcyl7XHJcblx0XHRcdFx0XHR2bS5hdXRoTWVzc2FnZSA9IHJlcy5kYXRhLnVzZXJNZXNzYWdlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHR9KVxyXG5cclxuXHQuY29udHJvbGxlcignTG9nb3V0Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRodHRwLCAkc3RhdGUsIFVzZXJJbmZvKXtcclxuXHRcdC8vTG9nb3V0IGFuZCByZXNldCB1c2VyXHJcblx0XHQkaHR0cC5wb3N0KCcvYXBpL3VzZXIvbG9nb3V0JykudGhlbihcclxuXHRcdFx0ZnVuY3Rpb24gU3VjY2Vzcygpe1xyXG5cdFx0XHRcdFVzZXJJbmZvLmRlc3Ryb3lVc2VyKCk7XHJcblx0XHRcdFx0JHN0YXRlLmdvKCdyb290Lm1haW4ucHVibGljJyk7XHJcblx0XHRcdH1cclxuXHRcdClcclxuXHR9KVxyXG5cdFxyXG5cdC5jb250cm9sbGVyKCdKb2luQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzdGF0ZSwgJHJvb3RTY29wZSwgQXV0aFNlcnZpY2Upe1xyXG5cdFx0dmFyIHZtID0gdGhpcztcclxuXHRcdHZtLmF1dGhNZXNzYWdlID0gJyc7XHJcblx0XHR2bS51c2VyID0ge1xyXG5cdFx0XHRmaXJzdE5hbWU6ICcnLFxyXG5cdFx0XHRsYXN0TmFtZTogJycsXHJcblx0XHRcdHJldHlwZVBhc3N3b3JkOiAnJywgXHJcblx0XHRcdHBhc3N3b3JkOiAnJyxcclxuXHRcdFx0ZW1haWw6ICcnLFxyXG5cdFx0XHRhY2NvdW50VHlwZTogJydcclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5zaWdudXAgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0QXV0aFNlcnZpY2Uuc2lnbnVwKHZtLnVzZXIpLnRoZW4oXHJcblx0XHRcdFx0ZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0XHRcdCRzdGF0ZS5nbygncm9vdC5tYWluJyk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRmdW5jdGlvbihyZXMpe1xyXG5cdFx0XHRcdFx0dm0uYXV0aE1lc3NhZ2UgPSByZXMuZGF0YS51c2VyTWVzc2FnZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH07XHJcblx0fSlcclxuXHJcblx0LmNvbnRyb2xsZXIoJ1Byb2ZpbGVDb250cm9sbGVyJywgZnVuY3Rpb24oJHN0YXRlLCBVc2VySW5mbyl7XHJcblx0XHR0aGlzLnVzZXIgPSBVc2VySW5mby5nZXRVc2VyKCk7XHJcblx0fSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcblx0YW5ndWxhci5tb2R1bGUoJ3VzZXInKS5jb25maWcoWyckc3RhdGVQcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyKXtcclxuXHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdyb290LmxvZ2luJywge1xyXG5cdFx0XHR1cmw6ICcvbG9naW4nLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL3VzZXIvcGFydGlhbHMvbG9naW4uaHRtbCcsXHJcblx0XHRcdGRhdGE6IHtcclxuXHRcdFx0XHRiSXNQdWJsaWM6IHRydWVcclxuXHRcdFx0fSxcclxuXHRcdFx0Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXHJcblx0XHRcdGNvbnRyb2xsZXJBczogJ2xvZ2luQ3RybCdcclxuXHRcdH0pO1xyXG5cclxuXHRcdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdyb290LmxvZ291dCcsIHtcclxuXHRcdFx0dXJsOiAnL2xvZ291dCcsXHJcblx0XHRcdGNvbnRyb2xsZXI6ICdMb2dvdXRDb250cm9sbGVyJ1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Jvb3Quam9pbicsIHtcclxuXHRcdFx0dXJsOiAnL2pvaW4nLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL3VzZXIvcGFydGlhbHMvam9pbi5odG1sJyxcclxuXHRcdFx0ZGF0YToge1xyXG5cdFx0XHRcdGJJc1B1YmxpYzogdHJ1ZVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb250cm9sbGVyOiAnSm9pbkNvbnRyb2xsZXInLFxyXG5cdFx0XHRjb250cm9sbGVyQXM6ICdqb2luQ3RybCcsXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3Jvb3QucHJvZmlsZScsIHtcclxuXHRcdFx0dXJsOiAnL3Byb2ZpbGUnLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJy9hbmd1bGFyL3VzZXIvcGFydGlhbHMvcHJvZmlsZS5odG1sJyxcclxuXHRcdFx0Y29udHJvbGxlcjogJ1Byb2ZpbGVDb250cm9sbGVyJyxcclxuXHRcdFx0Y29udHJvbGxlckFzOiAncHJvZmlsZUN0cmwnXHJcblx0XHR9KTtcclxuXHJcblx0fV0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG5cdGFuZ3VsYXIubW9kdWxlKCd1c2VyJykuZmFjdG9yeSgnQXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsIFVzZXJJbmZvKSB7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bG9naW46IGxvZ2luLFxyXG5cdFx0XHRzaWdudXA6IHNpZ251cCxcclxuXHRcdFx0aXNBdXRoZW50aWNhdGVkOiBpc0F1dGhlbnRpY2F0ZWQsXHJcblx0XHRcdHJldHJpZXZlUHJvZmlsZTogcmV0cmlldmVQcm9maWxlXHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIGxvZ2luKGNyZWRlbnRpYWxzKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cFxyXG5cdFx0XHQucG9zdCgnL2F1dGgvbG9jYWwnLCBjcmVkZW50aWFscylcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG5cdFx0XHRcdFVzZXJJbmZvLnNldFVzZXIocmVzLmRhdGEpO1xyXG5cdFx0XHRcdHJldHVybiByZXMuZGF0YTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHNpZ251cChuZXdVc2VyKXtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlci9qb2luJywgbmV3VXNlcikudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbihyZXMpe1xyXG5cdFx0XHRcdFx0VXNlckluZm8uc2V0VXNlcihyZXMuZGF0YSk7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRmdW5jdGlvbihyZXMpe1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmV0cmlldmVQcm9maWxlKCl7XHJcblx0XHRcdCRodHRwLmdldCgnL2FwaS91c2VyJykudGhlbihcclxuXHRcdFx0XHRmdW5jdGlvbiBTdWNjZXNzKHJlcyl7XHJcblx0XHRcdFx0XHRVc2VySW5mby5zZXRVc2VyKHJlcy5kYXRhKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGZ1bmN0aW9uIEZhaWx1cmUocmVzKXtcclxuXHRcdFx0XHRcdFVzZXJJbmZvLnNldFVzZXIoe30pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKXtcclxuXHRcdFx0cmV0dXJuIFVzZXJJbmZvLmxpdmUoKTtcclxuXHRcdH07XHJcblx0fSk7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCd1c2VyJykuZmFjdG9yeSgnVXNlckluZm8nLCBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0bGl2ZTogbGl2ZSxcclxuXHRcdFx0c2V0VXNlcjogc2V0VXNlcixcclxuXHRcdFx0Z2V0VXNlcjogZ2V0VXNlcixcclxuXHRcdFx0ZGVzdHJveVVzZXI6IGRlc3Ryb3lVc2VyXHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gbGl2ZSgpe1xyXG5cdFx0XHRyZXR1cm4gKE9iamVjdC5rZXlzKCRyb290U2NvcGUuY3VycmVudFVzZXIpLmxlbmd0aCA+IDApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNldFVzZXIodXNlcil7XHJcblx0XHRcdCRyb290U2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xyXG5cdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiBnZXRVc2VyKCl7XHJcblx0XHRcdHJldHVybiAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGRlc3Ryb3lVc2VyKCl7XHJcblx0XHRcdCRyb290U2NvcGUuY3VycmVudFVzZXIgPSB7fTtcclxuXHRcdH07XHJcblx0fSk7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCd1c2VyJykuZmFjdG9yeSgnQXV0aFJlc29sdmVyJywgZnVuY3Rpb24oJHEsICRyb290U2NvcGUsICRzdGF0ZSkge1xyXG5cdFx0dmFyIGJJc1Jlc29sdmVkID0gZmFsc2U7XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cmVzb2x2ZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblx0XHRcdFx0dmFyIHVud2F0Y2ggPSAkcm9vdFNjb3BlLiR3YXRjaCgnY3VycmVudFVzZXInLCBmdW5jdGlvbiAoY3VycmVudFVzZXIpIHtcclxuXHRcdFx0XHRcdGlmIChhbmd1bGFyLmlzRGVmaW5lZChjdXJyZW50VXNlcikpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRVc2VyKSB7XHJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShjdXJyZW50VXNlcik7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0YklzUmVzb2x2ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR1bndhdGNoKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRiSXNSZXNvbHZlZDogZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRyZXR1cm4gYklzUmVzb2x2ZWQ7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSk7XHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
